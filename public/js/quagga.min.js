(function(U,f){"object"===typeof exports&&"object"===typeof module?module.exports=f(f.toString())["default"]:"object"===typeof exports?exports.Quagga=f(f.toString())["default"]:U.Quagga=f(f.toString())["default"]})(this,function(U){return function(f){function g(c){if(a[c])return a[c].e;var e=a[c]={e:{},i:c,l:!1};f[c].call(e.e,e,e.e,g);e.l=!0;return e.e}var a={};g.m=f;g.c=a;g.p="/";return g(g.s=214)}([function(f,g,a){f.e=Array.isArray},function(f,g,a){var c=!0;g={disableLog:function(e){return"boolean"!==
typeof e?Error("Argument type: "+typeof e+". Please use a boolean."):(c=e)?"adapter.js logging disabled":"adapter.js logging enabled"},log:function(){"object"!==typeof window||c||"undefined"!==typeof console&&"function"===typeof console.log&&console.log.apply(console,arguments)},extractVersion:function(c,b,d){return(c=c.match(b))&&c.length>=d&&parseInt(c[d],10)},detectBrowser:function(){var c={browser:null,version:null};if("undefined"===typeof window||!window.navigator)return c.browser="Not a browser.",
c;navigator.mozGetUserMedia?(c.browser="firefox",c.version=this.extractVersion(navigator.userAgent,/Firefox\/([0-9]+)\./,1)):navigator.webkitGetUserMedia?window.webkitRTCPeerConnection?(c.browser="chrome",c.version=this.extractVersion(navigator.userAgent,/Chrom(e|ium)\/([0-9]+)\./,2)):navigator.userAgent.match(/Version\/(\d+).(\d+)/)?(c.browser="safari",c.version=this.extractVersion(navigator.userAgent,/AppleWebKit\/([0-9]+)\./,1)):c.browser="Unsupported webkit-based browser with GUM support but no WebRTC support.":
navigator.mediaDevices&&navigator.userAgent.match(/Edge\/(\d+).(\d+)$/)?(c.browser="edge",c.version=this.extractVersion(navigator.userAgent,/Edge\/(\d+).(\d+)$/,2)):c.browser="Not a supported browser.";return c}};f.e={log:g.log,disableLog:g.disableLog,browserDetails:g.detectBrowser(),extractVersion:g.extractVersion}},function(f,g,a){f.e=function(c){var e=typeof c;return!!c&&("object"==e||"function"==e)}},function(f,g,a){g=a(63);a="object"==typeof self&&self&&self.Object===Object&&self;g=g||a||Function("return this")();
f.e=g},function(f,g,a){function c(b,c){b=d.a.bind()(e(),b);h.a.call(this,b,c)}function e(){var b={};Object.keys(c.CONFIG_KEYS).forEach(function(d){b[d]=c.CONFIG_KEYS[d]["default"]});return b}var b=a(15),d=b&&b.__esModule?function(){return b["default"]}:function(){return b};Object.defineProperty(d,"a",{get:d});var h=a(7),k=Object.assign||function(b){for(var d=1;d<arguments.length;d++){var c=arguments[d],e;for(e in c)Object.prototype.hasOwnProperty.call(c,e)&&(b[e]=c[e])}return b};c.prototype=Object.create(h.a.prototype,
{CODE_L_START:{value:0},CODE_G_START:{value:10},START_PATTERN:{value:[1,1,1]},STOP_PATTERN:{value:[1,1,1]},MIDDLE_PATTERN:{value:[1,1,1,1,1]},EXTENSION_START_PATTERN:{value:[1,1,2]},CODE_PATTERN:{value:[[3,2,1,1],[2,2,2,1],[2,1,2,2],[1,4,1,1],[1,1,3,2],[1,2,3,1],[1,1,1,4],[1,3,1,2],[1,2,1,3],[3,1,1,2],[1,1,2,3],[1,2,2,2],[2,2,1,2],[1,1,4,1],[2,3,1,1],[1,3,2,1],[4,1,1,1],[2,1,3,1],[3,1,2,1],[2,1,1,3]]},CODE_FREQUENCY:{value:[0,11,13,14,19,25,28,21,22,26]},SINGLE_CODE_ERROR:{value:.7},AVG_CODE_ERROR:{value:.48},
FORMAT:{value:"ean_13",writeable:!1}});c.prototype.constructor=c;c.prototype._decodeCode=function(b,d){var c=[0,0,0,0],e,h=!this._row[b],k=0,a={error:Number.MAX_VALUE,code:-1,start:b,end:b};d||(d=this.CODE_PATTERN.length);for(e=b;e<this._row.length;e++)if(this._row[e]^h)c[k]++;else{if(k===c.length-1){for(h=0;h<d;h++)k=this._matchPattern(c,this.CODE_PATTERN[h]),k<a.error&&(a.code=h,a.error=k);a.end=e;if(a.error>this.AVG_CODE_ERROR)break;return a}k++;c[k]=1;h=!h}return null};c.prototype._findPattern=
function(b,d,c,e,h){var k=[],a,l=0,m={error:Number.MAX_VALUE,code:-1,start:0,end:0},q;d||(d=this._nextSet(this._row));void 0===c&&(c=!1);void 0===e&&(e=!0);void 0===h&&(h=this.AVG_CODE_ERROR);for(a=0;a<b.length;a++)k[a]=0;for(a=d;a<this._row.length;a++)if(this._row[a]^c)k[l]++;else{if(l===k.length-1){for(q=d=0;q<k.length;q++)d+=k[q];q=this._matchPattern(k,b);if(q<h)return m.error=q,m.start=a-d,m.end=a,m;if(e){for(q=0;q<k.length-2;q++)k[q]=k[q+2];k[k.length-2]=0;k[k.length-1]=0;l--}else break}else l++;
k[l]=1;c=!c}return null};c.prototype._findStart=function(){var b=this._nextSet(this._row);for(var d;!d;){d=this._findPattern(this.START_PATTERN,b);if(!d)return null;b=d.start-(d.end-d.start);if(0<=b&&this._matchRange(b,d.start,0))return d;b=d.end;d=null}};c.prototype._verifyTrailingWhitespace=function(b){var d=b.end+(b.end-b.start);return d<this._row.length&&this._matchRange(b.end,d,0)?b:null};c.prototype._findEnd=function(b,d){var c=this._findPattern(this.STOP_PATTERN,b,d,!1);return null!==c?this._verifyTrailingWhitespace(c):
null};c.prototype._calculateFirstDigit=function(b){var d;for(d=0;d<this.CODE_FREQUENCY.length;d++)if(b===this.CODE_FREQUENCY[d])return d;return null};c.prototype._decodePayload=function(b,d,c){var e,h=0;for(e=0;6>e;e++){b=this._decodeCode(b.end);if(!b)return null;b.code>=this.CODE_G_START?(b.code-=this.CODE_G_START,h|=1<<5-e):h|=0<<5-e;d.push(b.code);c.push(b)}e=this._calculateFirstDigit(h);if(null===e)return null;d.unshift(e);b=this._findPattern(this.MIDDLE_PATTERN,b.end,!0,!1);if(null===b)return null;
c.push(b);for(e=0;6>e;e++){b=this._decodeCode(b.end,this.CODE_G_START);if(!b)return null;c.push(b);d.push(b.code)}return b};c.prototype._decode=function(){var b=[],d=[],c={};var e=this._findStart();if(!e)return null;var h={code:e.code,start:e.start,end:e.end};d.push(h);h=this._decodePayload(h,b,d);if(!h)return null;h=this._findEnd(h.end,!1);if(!h)return null;d.push(h);if(!this._checksum(b))return null;if(0<this.supplements.length){c=this._decodeExtensions(h.end);if(!c)return null;var a=c.decodedCodes[c.decodedCodes.length-
1];if(!this._verifyTrailingWhitespace({start:a.start+((a.end-a.start)/2|0),end:a.end}))return null;c={supplement:c,code:b.join("")+c.code}}return k({code:b.join(""),start:e.start,end:h.end,codeset:"",startInfo:e,decodedCodes:d},c)};c.prototype._decodeExtensions=function(b){var d=this._nextSet(this._row,b),c=this._findPattern(this.EXTENSION_START_PATTERN,d,!1,!1);if(null===c)return null;for(b=0;b<this.supplements.length;b++){var e=this.supplements[b].decode(this._row,c.end);if(null!==e)return{code:e.code,
start:d,startInfo:c,end:e.end,codeset:"",decodedCodes:e.decodedCodes}}return null};c.prototype._checksum=function(b){var d=0,c;for(c=b.length-2;0<=c;c-=2)d+=b[c];d*=3;for(c=b.length-1;0<=c;c-=2)d+=b[c];return 0===d%10};c.CONFIG_KEYS={supplements:{type:"arrayOf(string)","default":[],description:"Allowed extensions to be decoded (2 and/or 5)"}};g.a=c},function(f,g,a){var c=a(129),e=a(158);f.e=function(b,d){var h=e(b,d);return c(h)?h:void 0}},function(f,g,a){g.a={drawRect:function(c,e,b,d){b.strokeStyle=
d.color;b.fillStyle=d.color;b.lineWidth=1;b.beginPath();b.strokeRect(c.x,c.y,e.x,e.y)},drawPath:function(c,e,b,d){b.strokeStyle=d.color;b.fillStyle=d.color;b.lineWidth=d.lineWidth;b.beginPath();b.moveTo(c[0][e.x],c[0][e.y]);for(d=1;d<c.length;d++)b.lineTo(c[d][e.x],c[d][e.y]);b.closePath();b.stroke()},drawImage:function(c,e,b){e=b.getImageData(0,0,e.x,e.y);var d=e.data,h=c.length,k=d.length;if(4!==k/h)return!1;for(;h--;){var a=c[h];d[--k]=255;d[--k]=a;d[--k]=a;d[--k]=a}b.putImageData(e,0,0);return!0}}},
function(f,g,a){function c(c,b){this._row=[];this.config=c||{};this.supplements=b;return this}c.prototype._nextUnset=function(c,b){var d;void 0===b&&(b=0);for(d=b;d<c.length;d++)if(!c[d])return d;return c.length};c.prototype._matchPattern=function(c,b,d){var e,k=0,a=0,m=0;d=d||this.SINGLE_CODE_ERROR||1;for(e=0;e<c.length;e++)a+=c[e],m+=b[e];if(a<m)return Number.MAX_VALUE;a/=m;d*=a;for(e=0;e<c.length;e++){var q=c[e];var n=b[e]*a;q=Math.abs(q-n)/n;if(q>d)return Number.MAX_VALUE;k+=q}return k/m};c.prototype._nextSet=
function(c,b){var d;for(d=b||0;d<c.length;d++)if(c[d])return d;return c.length};c.prototype._correctBars=function(c,b,d){for(var e=d.length,k;e--;)k=c[d[e]]*(1-(1-b)/2),1<k&&(c[d[e]]=k)};c.prototype._matchTrace=function(c,b){var d=[],e,k=this._nextSet(this._row),a=!this._row[k],m=0,q={error:Number.MAX_VALUE,code:-1,start:0};if(c){for(e=0;e<c.length;e++)d.push(0);for(e=k;e<this._row.length;e++)if(this._row[e]^a)d[m]++;else{if(m===d.length-1)return a=this._matchPattern(d,c),a<b?(q.start=e-k,q.end=e,
q.counter=d,q):null;m++;d[m]=1;a=!a}}else for(d.push(0),e=k;e<this._row.length;e++)this._row[e]^a?d[m]++:(m++,d.push(0),d[m]=1,a=!a);q.start=k;q.end=this._row.length-1;q.counter=d;return q};c.prototype.decodePattern=function(e){this._row=e;e=this._decode();if(null===e){if(this._row.reverse(),e=this._decode())e.direction=c.DIRECTION.REVERSE,e.start=this._row.length-e.start,e.end=this._row.length-e.end}else e.direction=c.DIRECTION.FORWARD;e&&(e.format=this.FORMAT);return e};c.prototype._matchRange=
function(c,b,d){for(c=0>c?0:c;c<b;c++)if(this._row[c]!==d)return!1;return!0};c.prototype._fillCounters=function(c,b,d){var e=0,k=[];d="undefined"!==typeof d?d:!0;c="undefined"!==typeof c?c:this._nextUnset(this._row);b=b||this._row.length;for(k[e]=0;c<b;c++)this._row[c]^d?k[e]++:(e++,k[e]=1,d=!d);return k};Object.defineProperty(c.prototype,"FORMAT",{value:"unknown",writeable:!1});c.DIRECTION={FORWARD:1,REVERSE:-1};c.Exception={StartNotFoundException:"Start-Info was not found!",CodeNotFoundException:"Code could not be found!",
PatternNotFoundException:"Pattern could not be found!"};c.CONFIG_KEYS={};g.a=c},function(f,g,a){f.e=function(c){var e=new Float32Array(2);e[0]=c[0];e[1]=c[1];return e}},function(f,g,a){var c=a(40),e=1/0;f.e=function(b){if("string"==typeof b||c(b))return b;var d=b+"";return"0"==d&&1/b==-e?"-0":d}},function(f,g,a){f.e=function(c,e){return c===e||c!==c&&e!==e}},function(f,g,a){var c=a(70);g=Object.prototype;var e=g.hasOwnProperty,b=g.toString,d=g.propertyIsEnumerable;f.e=function(h){return c(h)&&e.call(h,
"callee")&&(!d.call(h,"callee")||"[object Arguments]"==b.call(h))}},function(f,g,a){var c=a(38),e=a(39);f.e=function(b){return null!=b&&e(b.length)&&!c(b)}},function(f,g,a){f.e=function(c){return!!c&&"object"==typeof c}},function(f,g,a){var c=a(49),e=a(131),b=a(12);f.e=function(d){return b(d)?c(d):e(d)}},function(f,g,a){var c=a(134);g=a(151)(function(e,b,d){c(e,b,d)});f.e=g},function(f,g,a){g.a={init:function(c,e){for(var b=c.length;b--;)c[b]=e},shuffle:function(c){var e=c.length-1;for(e;0<=e;e--){var b=
Math.floor(Math.random()*e);var d=c[e];c[e]=c[b];c[b]=d}return c},toPointList:function(c){var e,b,d=[];for(e=0;e<c.length;e++){var h=[];for(b=0;b<c[e].length;b++)h[b]=c[e][b];d[e]="["+h.join(",")+"]"}return"["+d.join(",\r\n")+"]"},threshold:function(c,e,b){var d,h=[];for(d=0;d<c.length;d++)b.apply(c,[c[d]])>=e&&h.push(c[d]);return h},maxIndex:function(c){var e,b=0;for(e=0;e<c.length;e++)c[e]>c[b]&&(b=e);return b},max:function(c){var e,b=0;for(e=0;e<c.length;e++)c[e]>b&&(b=c[e]);return b},sum:function(c){for(var e=
c.length,b=0;e--;)b+=c[e];return b}}},function(f,g,a){function c(b){var c=-1,d=b?b.length:0;for(this.clear();++c<d;){var e=b[c];this.set(e[0],e[1])}}g=a(172);var e=a(173),b=a(174),d=a(175);a=a(176);c.prototype.clear=g;c.prototype["delete"]=e;c.prototype.get=b;c.prototype.has=d;c.prototype.set=a;f.e=c},function(f,g,a){function c(b){this.__data__=new e(b)}var e=a(17);g=a(186);var b=a(187),d=a(188),h=a(189);a=a(190);c.prototype.clear=g;c.prototype["delete"]=b;c.prototype.get=d;c.prototype.has=h;c.prototype.set=
a;f.e=c},function(f,g,a){g=a(3).Symbol;f.e=g},function(f,g,a){var c=a(10);f.e=function(e,b){for(var d=e.length;d--;)if(c(e[d][0],b))return d;return-1}},function(f,g,a){var c=a(170);f.e=function(e,b){var d=e.__data__;return c(b)?d["string"==typeof b?"string":"hash"]:d.map}},function(f,g,a){f.e=function(c){var e=!1;if(null!=c&&"function"!=typeof c.toString)try{e=!!(c+"")}catch(b){}return e}},function(f,g,a){var c=a(0),e=a(40),b=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,d=/^\w*$/;f.e=function(a,
k){if(c(a))return!1;var h=typeof a;return"number"==h||"symbol"==h||"boolean"==h||null==a||e(a)?!0:d.test(a)||!b.test(a)||null!=k&&a in Object(k)}},function(f,g,a){var c=Object.prototype;f.e=function(e){var b=e&&e.constructor;return e===("function"==typeof b&&b.prototype||c)}},function(f,g,a){g=a(5)(Object,"create");f.e=g},function(f,g,a){function c(b,c){function d(b,c){var d=0,e;for(e=b;e<=c;e++)d+=a[e];return d}function e(b,c){var d,e=0;for(d=b;d<=c;d++)e+=d*a[d];return e}c||(c=8);var a,k=8-c;return function(){var k=
[0],l,m=(1<<c)-1;(l=c)||(l=8);var q=b.data;var n=q.length;var f=8-l;for(l=new Int32Array(1<<l);n--;)l[q[n]>>f]++;a=l;for(n=1;n<m;n++)f=d(0,n),l=d(n+1,m),q=f*l,0===q&&(q=1),l*=e(0,n),f*=e(n+1,m),f=l-f,k[n]=f*f/q;return h.a.maxIndex(k)}()<<k}function e(b){var c=[],d=[],e;for(e=1;e<Math.sqrt(b)+1;e++)0===b%e&&(d.push(e),e!==b/e&&c.unshift(Math.floor(b/e)));return d.concat(c)}function b(b,c){for(var d=0,e=0,a=[];d<b.length&&e<c.length;)b[d]===c[e]?(a.push(b[d]),d++,e++):b[d]>c[e]?e++:d++;return a}var d=
a(77),h=a(16);g.f=function(b,c){return{x:b,y:c,toVec2:function(){return k.clone([this.x,this.y])},toVec3:function(){return l.clone([this.x,this.y,1])},round:function(){this.x=0<this.x?Math.floor(this.x+.5):Math.floor(this.x-.5);this.y=0<this.y?Math.floor(this.y+.5):Math.floor(this.y-.5);return this}}};g.c=function(b,d){var e=c(b),a=d;a||(a=b);var k=b.data,h=k.length;for(a=a.data;h--;)a[h]=k[h]<e?1:0;return e};g.d=function(b,c,e){var a,k,h,l=[];e||(e="rad");for(a=0;a<b.length;a++){var m=h=d.a.createPoint(b[a],
a,e),q=!1;for(k=0;k<l.length;k++){var n=l[k];n.fits(m)&&(n.add(m),q=!0)}q||l.push(d.a.create(h,c))}return l};g.e=function(b,c,d){var e,a=0,k=0,h=[];for(e=0;e<c;e++)h[e]={score:0,item:null};for(e=0;e<b.length;e++){var l=d.apply(this,[b[e]]);if(l>k)for(k=h[a],k.score=l,k.item=b[e],k=Number.MAX_VALUE,l=0;l<c;l++)h[l].score<k&&(k=h[l].score,a=l)}return h};g.i=function(b,c,d){var e=0,a=c.x,k=Math.floor(b.length/4),h=c.x/2,l=0;c=c.x;for(var m;a<k;){for(m=0;m<h;m++)d[l]=Math.floor((.299*b[4*e]+.587*b[4*
e+1]+.114*b[4*e+2]+(.299*b[4*(e+1)]+.587*b[4*(e+1)+1]+.114*b[4*(e+1)+2])+(.299*b[4*a]+.587*b[4*a+1]+.114*b[4*a+2])+(.299*b[4*(a+1)]+.587*b[4*(a+1)+1]+.114*b[4*(a+1)+2]))/4),l++,e+=2,a+=2;e+=c;a+=c}};g.j=function(b,c,d){var e=b.length/4|0;if(d&&!0===d.singleChannel)for(d=0;d<e;d++)c[d]=b[4*d];else for(d=0;d<e;d++)c[d]=Math.floor(.299*b[4*d]+.587*b[4*d+1]+.114*b[4*d+2])};g.g=function(b,d){for(var c=b.data,e=b.size.x,a=d.data,k=0,h=e,l=c.length,m=e/2,q=0;h<l;){for(var n=0;n<m;n++)a[q]=Math.floor((c[k]+
c[k+1]+c[h]+c[h+1])/4),q++,k+=2,h+=2;k+=e;h+=e}};g.a=function(b,c){var d=b[0],e=b[2],a=e*b[1],k=a*(1-Math.abs(d/60%2-1));e-=a;var h=0,l=0,m=0;c=c||[0,0,0];60>d?(h=a,l=k):120>d?(h=k,l=a):180>d?(l=a,m=k):240>d?(l=k,m=a):300>d?(h=k,m=a):360>d&&(h=a,m=k);c[0]=255*(h+e)|0;c[1]=255*(l+e)|0;c[2]=255*(m+e)|0;return c};g.b=function(c,d){function a(b){for(var d=0,c=b[Math.floor(b.length/2)];d<b.length-1&&b[d]<n;)d++;0<d&&(c=Math.abs(b[d]-n)>Math.abs(b[d-1]-n)?b[d-1]:b[d]);return n/c<m[q+1]/m[q]&&n/c>m[q-1]/
m[q]?{x:c,y:c}:null}var k=e(d.x),h=e(d.y),l=Math.max(d.x,d.y);k=b(k,h);var m=[8,10,15,20,32,60,80];h={"x-small":5,small:4,medium:3,large:2,"x-large":1};var q=h[c]||h.medium;h=m[q];var n=Math.floor(l/h);k=a(k);k||(k=a(e(l)))||(k=a(e(n*h)));return k};g.h=function(b,d,c){var e={width:b,height:d};b=Object.keys(c).reduce(function(b,d){var a=c[d];a={value:parseFloat(a),unit:(a.indexOf("%"),"%")};a=m[d](a,e);b[d]=a;return b},{});return{sx:b.left,sy:b.top,sw:b.right-b.left,sh:b.bottom-b.top}};var k={clone:a(8)},
l={clone:a(109)},m={top:function(b,d){if("%"===b.unit)return Math.floor(b.value/100*d.height)},right:function(b,d){if("%"===b.unit)return Math.floor(d.width-b.value/100*d.width)},bottom:function(b,d){if("%"===b.unit)return Math.floor(d.height-b.value/100*d.height)},left:function(b,d){if("%"===b.unit)return Math.floor(b.value/100*d.width)}}},function(f,g,a){function c(b,c,e,a){c?this.data=c:e?(this.data=new e(b.x*b.y),e===Array&&a&&d.a.init(this.data,0)):(this.data=new Uint8Array(b.x*b.y),Uint8Array===
Array&&a&&d.a.init(this.data,0));this.size=b}var e=a(80),b=a(26),d=a(16),h={clone:a(8)};c.prototype.inImageWithBorder=function(b,d){return b.x>=d&&b.y>=d&&b.x<this.size.x-d&&b.y<this.size.y-d};c.sample=function(b,d,c){var e=Math.floor(d),a=Math.floor(c),h=b.size.x,k=a*b.size.x+e,l=b.data[k+0],m=b.data[k+h];h=b.data[k+h+1];b=l-b.data[k+1];c-=a;return Math.floor((d-e)*(c*(b-m+h)-b)+c*(m-l)+l)};c.clearArray=function(b){for(var d=b.length;d--;)b[d]=0};c.prototype.subImage=function(b,d){return new e.a(b,
d,this)};c.prototype.subImageAsCopy=function(b,d){var c=b.size.y,e=b.size.x,a,h;for(a=0;a<e;a++)for(h=0;h<c;h++)b.data[h*e+a]=this.data[(d.y+h)*this.size.x+d.x+a]};c.prototype.copyTo=function(b){var d=this.data.length,c=this.data;for(b=b.data;d--;)b[d]=c[d]};c.prototype.get=function(b,d){return this.data[d*this.size.x+b]};c.prototype.getSafe=function(b,d){var c;if(!this.indexMapping){this.indexMapping={x:[],y:[]};for(c=0;c<this.size.x;c++)this.indexMapping.x[c]=c,this.indexMapping.x[c+this.size.x]=
c;for(c=0;c<this.size.y;c++)this.indexMapping.y[c]=c,this.indexMapping.y[c+this.size.y]=c}return this.data[this.indexMapping.y[d+this.size.y]*this.size.x+this.indexMapping.x[b+this.size.x]]};c.prototype.set=function(b,d,c){this.data[d*this.size.x+b]=c;return this};c.prototype.zeroBorder=function(){var b,d=this.size.x,c=this.size.y,e=this.data;for(b=0;b<d;b++)e[b]=e[(c-1)*d+b]=0;for(b=1;b<c-1;b++)e[b*d]=e[b*d+(d-1)]=0};c.prototype.invert=function(){for(var b=this.data,d=b.length;d--;)b[d]=b[d]?0:1};
c.prototype.convolve=function(b){var d,c,e,a,h=b.length/2|0;for(c=0;c<this.size.y;c++)for(d=0;d<this.size.x;d++){var k=0;for(a=-h;a<=h;a++)for(e=-h;e<=h;e++)k+=b[a+h][e+h]*this.getSafe(d+e,c+a);this.data[c*this.size.x+d]=k}};c.prototype.moments=function(b){var d=this.data,c,e,a=this.size.y,k=this.size.x,f=[],g=[],p=Math.PI,w=p/4;if(0>=b)return g;for(c=0;c<b;c++)f[c]={m00:0,m01:0,m10:0,m11:0,m02:0,m20:0,theta:0,rad:0};for(e=0;e<a;e++){var B=e*e;for(c=0;c<k;c++){var v=d[e*k+c];0<v&&(v=f[v-1],v.m00+=
1,v.m01+=e,v.m10+=c,v.m11+=c*e,v.m02+=B,v.m20+=c*c)}}for(c=0;c<b;c++)v=f[c],isNaN(v.m00)||0===v.m00||(k=v.m10/v.m00,a=v.m01/v.m00,d=v.m11/v.m00-k*a,a=v.m02/v.m00-a*a,k=v.m20/v.m00-k*k,a=(a-k)/(2*d),a=.5*Math.atan(a)+(0<=d?w:-w)+p,v.theta=(180*a/p+90)%180-90,0>v.theta&&(v.theta+=180),v.rad=a>p?a-p:a,v.vec=h.clone([Math.cos(a),Math.sin(a)]),g.push(v));return g};c.prototype.show=function(b,d){var c,e;d||(d=1);var a=b.getContext("2d");b.width=this.size.x;b.height=this.size.y;var h=a.getImageData(0,0,
b.width,b.height);var k=h.data;for(e=0;e<this.size.y;e++)for(c=0;c<this.size.x;c++){var l=e*this.size.x+c;var f=this.get(c,e)*d;k[4*l]=f;k[4*l+1]=f;k[4*l+2]=f;k[4*l+3]=255}a.putImageData(h,0,0)};c.prototype.overlay=function(d,c,e){if(!c||0>c||360<c)c=360;for(var a=[0,1,1],h=[0,0,0],k=[255,255,255],l=[0,0,0],m=d.getContext("2d"),f=m.getImageData(e.x,e.y,this.size.x,this.size.y),g=f.data,B=this.data.length;B--;)a[0]=this.data[B]*c,d=0>=a[0]?k:360<=a[0]?l:b.a.bind()(a,h),g[4*B]=d[0],g[4*B+1]=d[1],g[4*
B+2]=d[2],g[4*B+3]=255;m.putImageData(f,e.x,e.y)};g.a=c},function(f,g,a){g=a(5);a=a(3);a=g(a,"Map");f.e=a},function(f,g,a){function c(b){var d=-1,c=b?b.length:0;for(this.clear();++d<c;){var e=b[d];this.set(e[0],e[1])}}g=a(177);var e=a(178),b=a(179),d=a(180);a=a(181);c.prototype.clear=g;c.prototype["delete"]=e;c.prototype.get=b;c.prototype.has=d;c.prototype.set=a;f.e=c},function(f,g,a){f.e=function(c,e){for(var b=-1,d=e.length,a=c.length;++b<d;)c[a+b]=e[b];return c}},function(f,g,a){var c=a(47);f.e=
function(e){var b=new e.constructor(e.byteLength);(new c(b)).set(new c(e));return b}},function(f,g,a){var c=a(52);f.e=function(e,b,d,a){d||(d={});for(var h=-1,l=b.length;++h<l;){var m=b[h],f=a?a(d[m],e[m],m,d,e):void 0;c(d,m,void 0===f?e[m]:f)}return d}},function(f,g,a){g=a(37)(Object.getPrototypeOf,Object);f.e=g},function(f,g,a){g=a(37);a=a(74);var c=Object.getOwnPropertySymbols;g=c?g(c,Object):a;f.e=g},function(f,g,a){g=a(110);var c=a(28),e=a(112),b=a(113),d=a(115),h=a(125),k=a(69),l=Object.prototype.toString,
m=k(g),q=k(c),n=k(e),u=k(b),r=k(d);a=h;if(g&&"[object DataView]"!=a(new g(new ArrayBuffer(1)))||c&&"[object Map]"!=a(new c)||e&&"[object Promise]"!=a(e.resolve())||b&&"[object Set]"!=a(new b)||d&&"[object WeakMap]"!=a(new d))a=function(b){var d=l.call(b);if(b=(b="[object Object]"==d?b.constructor:void 0)?k(b):void 0)switch(b){case m:return"[object DataView]";case q:return"[object Map]";case n:return"[object Promise]";case u:return"[object Set]";case r:return"[object WeakMap]"}return d};f.e=a},function(f,
g,a){var c=/^(?:0|[1-9]\d*)$/;f.e=function(e,b){b=null==b?9007199254740991:b;return!!b&&("number"==typeof e||c.test(e))&&-1<e&&0==e%1&&e<b}},function(f,g,a){f.e=function(c,e){return function(b){return c(e(b))}}},function(f,g,a){var c=a(2),e=Object.prototype.toString;f.e=function(b){b=c(b)?e.call(b):"";return"[object Function]"==b||"[object GeneratorFunction]"==b}},function(f,g,a){f.e=function(c){return"number"==typeof c&&-1<c&&0==c%1&&9007199254740991>=c}},function(f,g,a){var c=a(13),e=Object.prototype.toString;
f.e=function(b){return"symbol"==typeof b||c(b)&&"[object Symbol]"==e.call(b)}},function(f,g,a){g=a(130);var c=a(141);g=(a=(a=a(183))&&a.isTypedArray)?c(a):g;f.e=g},function(f,g,a){function c(b,d){return d?d.some(function(d){return Object.keys(d).every(function(c){return d[c]===b[c]})}):!1}var e=a(6);g.a={create:function(b){var d=document.createElement("canvas"),a=d.getContext("2d"),k=[],l=b.capacity||20,m=!0===b.capture;return{addResult:function(h,f,g){var q={},n;if(n=l&&g&&!c(g,b.blacklist))n=b.filter,
n="function"===typeof n?n(g):!0;n&&(l--,q.codeResult=g,m&&(d.width=f.x,d.height=f.y,e.a.drawImage(h,f,a),q.frame=d.toDataURL()),k.push(q))},getResults:function(){return k}}}}},function(f,g,a){f=a(82);g.a=f},function(f,g,a){g.a={searchDirections:[[0,1],[1,1],[1,0],[1,-1],[0,-1],[-1,-1],[-1,0],[-1,1]],create:function(c,e){function b(b,c,e,h){var f;for(f=0;7>f;f++){var n=b.cy+k[b.dir][0];var q=b.cx+k[b.dir][1];m=n*l+q;if(d[m]!==c||0!==a[m]&&a[m]!==e)0===a[m]&&(a[m]=h),b.dir=(b.dir+1)%8;else return a[m]=
e,b.cy=n,b.cx=q,!0}return!1}var d=c.data,a=e.data,k=this.searchDirections,l=c.size.x,m;return{trace:function(d,c,e,a){return b(d,c,e,a)},contourTracing:function(d,c,e,a,h){var k=null,l={cx:c,cy:d,dir:0};if(b(l,a,e,h)){var m=k={dir:l.dir,x:c,y:d,next:null,prev:null};var f=l.dir;var n={dir:0,x:l.cx,y:l.cy,next:null,prev:null};n.prev=m;m.next=n;n.next=null;m=n;do l.dir=(l.dir+6)%8,b(l,a,e,h),f!==l.dir?(m.dir=l.dir,n={dir:0,x:l.cx,y:l.cy,next:null,prev:null},n.prev=m,m.next=n,n.next=null,m=n):(m.dir=
f,m.x=l.cx,m.y=l.cy),f=l.dir;while(l.cx!==c||l.cy!==d);k.prev=m.prev;m.prev.next=k}return k}}}}},function(f,g,a){function c(){e.a.call(this)}var e=a(7),b=a(16);c.prototype=Object.create(e.a.prototype,{ALPHABETH_STRING:{value:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. *$/+%"},ALPHABET:{value:[48,49,50,51,52,53,54,55,56,57,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,45,46,32,42,36,47,43,37]},CHARACTER_ENCODINGS:{value:[52,289,97,352,49,304,112,37,292,100,265,73,328,25,
280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,148,168,162,138,42]},ASTERISK:{value:148},FORMAT:{value:"code_39",writeable:!1}});c.prototype.constructor=c;c.prototype._toCounters=function(d,c){var e=c.length,a=this._row.length,h=!this._row[d],f,n=0;b.a.init(c,0);for(f=d;f<a;f++)if(this._row[f]^h)c[n]++;else if(n++,n===e)break;else c[n]=1,h=!h;return c};c.prototype._decode=function(){var d=[0,0,0,0,0,0,0,0,0],c=[],e=this._findStart();if(!e)return null;var a=
this._nextSet(this._row,e.end);do{d=this._toCounters(a,d);var m=this._toPattern(d);if(0>m)return null;m=this._patternToChar(m);if(0>m)return null;c.push(m);var f=a;a+=b.a.sum(d);a=this._nextSet(this._row,a)}while("*"!==m);c.pop();return c.length&&this._verifyTrailingWhitespace(f,a,d)?{code:c.join(""),start:e.start,end:a,startInfo:e,decodedCodes:c}:null};c.prototype._verifyTrailingWhitespace=function(c,e,a){a=b.a.sum(a);return 3*(e-c-a)>=a?!0:!1};c.prototype._patternToChar=function(b){var c;for(c=
0;c<this.CHARACTER_ENCODINGS.length;c++)if(this.CHARACTER_ENCODINGS[c]===b)return String.fromCharCode(this.ALPHABET[c]);return-1};c.prototype._findNextWidth=function(b,c){var d,e=Number.MAX_VALUE;for(d=0;d<b.length;d++)b[d]<e&&b[d]>c&&(e=b[d]);return e};c.prototype._toPattern=function(b){for(var c=b.length,d=0,e=c,a=0,f,n;3<e;){d=this._findNextWidth(b,d);for(n=f=e=0;n<c;n++)b[n]>d&&(f|=1<<c-1-n,e++,a+=b[n]);if(3===e){for(n=0;n<c&&0<e;n++)if(b[n]>d&&(e--,2*b[n]>=a))return-1;return f}}return-1};c.prototype._findStart=
function(){for(var b=this._nextSet(this._row),c=b,e=[0,0,0,0,0,0,0,0,0],a=0,m=!1,f;b<this._row.length;b++)if(this._row[b]^m)e[a]++;else{if(a===e.length-1){if(this._toPattern(e)===this.ASTERISK&&(f=Math.floor(Math.max(0,c-(b-c)/4)),this._matchRange(f,c,0)))return{start:c,end:b};c+=e[0]+e[1];for(f=0;7>f;f++)e[f]=e[f+2];e[7]=0;e[8]=0;a--}else a++;e[a]=1;m=!m}return null};g.a=c},function(f,g,a){f.e=function(c,e){return c[0]*e[0]+c[1]*e[1]}},function(f,g,a){g=a(3).Uint8Array;f.e=g},function(f,g,a){f.e=
function(c,e){for(var b=-1,d=c?c.length:0;++b<d&&!1!==e(c[b],b,c););return c}},function(f,g,a){var c=a(139),e=a(11),b=a(0),d=a(36),h=Object.prototype.hasOwnProperty;f.e=function(a,l){var k=b(a)||e(a)?c(a.length,String):[],f=k.length,n=!!f,g;for(g in a)!l&&!h.call(a,g)||n&&("length"==g||d(g,f))||k.push(g);return k}},function(f,g,a){f.e=function(c,e,b,d){var a=-1,k=c?c.length:0;for(d&&k&&(b=c[++a]);++a<k;)b=e(b,c[a],a,c);return b}},function(f,g,a){var c=a(10);f.e=function(e,b,d){if(void 0!==d&&!c(e[b],
d)||"number"==typeof b&&void 0===d&&!(b in e))e[b]=d}},function(f,g,a){var c=a(10),e=Object.prototype.hasOwnProperty;f.e=function(b,d,a){var h=b[d];e.call(b,d)&&c(h,a)&&(void 0!==a||d in b)||(b[d]=a)}},function(f,g,a){var c=a(60),e=a(23),b=a(9);f.e=function(d,a){a=e(a,d)?[a]:c(a);for(var h=0,l=a.length;null!=d&&h<l;)d=d[b(a[h++])];return h&&h==l?d:void 0}},function(f,g,a){var c=a(30),e=a(0);f.e=function(b,d,a){d=d(b);return e(b)?d:c(d,a(b))}},function(f,g,a){function c(a,k,l,m,f){return a===k?!0:
null==a||null==k||!b(a)&&!d(k)?a!==a&&k!==k:e(a,k,c,l,m,f)}var e=a(127),b=a(2),d=a(13);f.e=c},function(f,g,a){var c=a(132),e=a(133),b=a(194),d=a(0),h=a(201);f.e=function(a){return"function"==typeof a?a:null==a?b:"object"==typeof a?d(a)?e(a[0],a[1]):c(a):h(a)}},function(f,g,a){var c=a(2),e=a(24),b=a(182),d=Object.prototype.hasOwnProperty;f.e=function(a){if(!c(a))return b(a);var h=e(a),l=[],m;for(m in a)("constructor"!=m||!h&&d.call(a,m))&&l.push(m);return l}},function(f,g,a){f.e=function(c,e,b){for(var d=
-1,a=e.length,k={};++d<a;){var l=e[d],m=c[l];b(m,l)&&(k[l]=m)}return k}},function(f,g,a){var c=a(118),e=Math.max;f.e=function(b,d){d=e(void 0===d?b.length-1:d,0);return function(){for(var a=arguments,k=-1,l=e(a.length-d,0),m=Array(l);++k<l;)m[k]=a[d+k];k=-1;for(l=Array(d+1);++k<d;)l[k]=a[k];l[d]=m;return c(b,this,l)}}},function(f,g,a){var c=a(0),e=a(191);f.e=function(b){return c(b)?b:e(b)}},function(f,g,a){f.e=function(c,e){var b=-1,d=c.length;for(e||(e=Array(d));++b<d;)e[b]=c[b];return e}},function(f,
g,a){var c=a(114),e=a(120);f.e=function(b,d,a,k,l,m){var h=l&2,f=b.length,g=d.length;if(f!=g&&!(h&&g>f))return!1;if((g=m.get(b))&&m.get(d))return g==d;g=-1;var r=!0,t=l&1?new c:void 0;m.set(b,d);for(m.set(d,b);++g<f;){var p=b[g],w=d[g];if(k)var B=h?k(w,p,g,d,b,m):k(p,w,g,b,d,m);if(void 0!==B){if(B)continue;r=!1;break}if(t){if(!e(d,function(b,c){if(!t.has(c)&&(p===b||a(p,b,k,l,m)))return t.add(c)})){r=!1;break}}else if(p!==w&&!a(p,w,k,l,m)){r=!1;break}}m["delete"](b);m["delete"](d);return r}},function(f,
g,a){(function(c){f.e="object"==typeof c&&c&&c.Object===Object&&c}).call(g,function(){return this}())},function(f,g,a){var c=a(2);f.e=function(e){return e===e&&!c(e)}},function(f,g,a){f.e=function(c){var e=-1,b=Array(c.size);c.forEach(function(c,a){b[++e]=[a,c]});return b}},function(f,g,a){f.e=function(c,e){return function(b){return null==b?!1:b[c]===e&&(void 0!==e||c in Object(b))}}},function(f,g,a){g=a(37)(Object.keys,Object);f.e=g},function(f,g,a){f.e=function(c){var e=-1,b=Array(c.size);c.forEach(function(c){b[++e]=
c});return b}},function(f,g,a){var c=Function.prototype.toString;f.e=function(e){if(null!=e){try{return c.call(e)}catch(b){}return e+""}return""}},function(f,g,a){var c=a(12),e=a(13);f.e=function(b){return e(b)&&c(b)}},function(f,g,a){f=a(75)(f);var c=a(3);a=a(202);var e=(g="object"==typeof g&&g&&!g.nodeType&&g)&&"object"==typeof f&&f&&!f.nodeType&&f;c=e&&e.exports===g?c.Buffer:void 0;f.e=(c?c.isBuffer:void 0)||a},function(f,g,a){var c=a(49),e=a(57),b=a(12);f.e=function(d){return b(d)?c(d,!0):e(d)}},
function(f,g,a){var c=a(119),e=a(124),b=a(136);g=a(59);var d=a(9);a=g(function(a,k){return null==a?{}:b(a,c(e(k,1),d))});f.e=a},function(f,g,a){f.e=function(){return[]}},function(f,g,a){f.e=function(c){c.webpackPolyfill||(c.deprecate=function(){},c.paths=[],c.children=[],Object.defineProperty(c,"exports",{enumerable:!0,configurable:!1,get:function(){return c.e},set:function(e){return c.e=e}}),Object.defineProperty(c,"loaded",{enumerable:!0,configurable:!1,get:function(){return c.l}}),Object.defineProperty(c,
"id",{enumerable:!0,configurable:!1,get:function(){return c.i}}),c.webpackPolyfill=1);return c}},function(f,g,a){function c(b){var c=q.a.bind()(),d=null,e=!1;return{addEventListener:function(b,d){c.subscribe(b,d);return this},removeEventListener:function(b,d){c.unsubscribe(b,d);return this},start:function(){return c.isRunning()?Promise.resolve(!0):d?d:e?(c.start(),Promise.resolve(!0)):d=new Promise(function(a,h){c.init(b,function(b){b&&(console.log(b),h(b));e=!0;c.start();a();d=null})})},stop:function(){c.stop();
e=!1;return this},toPromise:function(){var d=this;if("LiveStream"===b.inputStream.type||"VideoStream"===b.inputStream.type){var e=function(){var b=!1;return{v:{cancel:function(){b=!0},promise:new Promise(function(e,a){function h(d){d&&d.codeResult&&d.codeResult.code&&(c.stop(),c.unsubscribe("processed",h),e(d));b&&(c.stop(),c.unsubscribe("processed",h),a("cancelled!"))}c.subscribe("processed",h);d.start()})}}}();if("object"===("undefined"===typeof e?"undefined":w(e)))return e.v}else return new Promise(function(d,
e){c.decodeSingle(b,function(b){return b&&b.codeResult&&b.codeResult.code?d(b):e(b)})})},registerResultCollector:function(b){c.registerResultCollector(b)},getCanvas:function(){return c.canvas.dom.image}}}function e(b,d){var e=2>=arguments.length||void 0===arguments[2]?{}:arguments[2];b=p.a.bind()(b,e,d);return c(b)}function b(){var b=0>=arguments.length||void 0===arguments[0]?{}:arguments[0],c,e=arguments[1],a=2>=arguments.length||void 0===arguments[2]?{}:arguments[2];b=k.a.bind()({},b,(c={},c[e]=
a,c));return d(b)}function d(){var a=0>=arguments.length||void 0===arguments[0]?t.a:arguments[0];return{fromSource:function(b,c){return e(a,b,c)},fromConfig:function(b){return c(k.a.bind()({},a,b))},decoder:function(c){return b(a,"decoder",c)},locator:function(c){return b(a,"locator",c)},throttle:function(c){return b(a,"frequency",1E3/parseInt(c))},config:function(b){return d(k.a.bind()({},a,b))},ImageWrapper:n.a,ImageDebug:u.a,ResultCollector:r.a,_worker:{createScanner:q.a}}}var h=a(15),k=h&&h.__esModule?
function(){return h["default"]}:function(){return h};Object.defineProperty(k,"a",{get:k});var l=a(81);f=l&&l.__esModule?function(){return l["default"]}:function(){return l};Object.defineProperty(f,"a",{get:f});var m=a(206);f=m&&m.__esModule?function(){return m["default"]}:function(){return m};Object.defineProperty(f,"a",{get:f});var q=a(103),n=a(27),u=a(6),r=a(42),t=a(43),p=a(86),w="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"===
typeof Symbol&&b.constructor===Symbol?"symbol":typeof b};g["default"]=d()},function(f,g,a){var c={clone:a(8),dot:a(46)};g.a={create:function(e,b){function d(b){m[b.id]=b;k.push(b)}function a(){var b,d=0;for(b=0;b<k.length;b++)d+=k[b].rad;l.rad=d/k.length;l.vec=c.clone([Math.cos(l.rad),Math.sin(l.rad)])}var k=[],l={rad:0,vec:c.clone([0,0])},m={};d(e);a();return{add:function(b){m[b.id]||(d(b),a())},fits:function(d){return Math.abs(c.dot(d.point.vec,l.vec))>b?!0:!1},getPoints:function(){return k},getCenter:function(){return l}}},
createPoint:function(c,b,d){return{rad:c[d],point:c,id:b}}}},function(f,g,a){var c=Object.assign||function(b){for(var c=1;c<arguments.length;c++){var d=arguments[c],e;for(e in d)Object.prototype.hasOwnProperty.call(d,e)&&(b[e]=d[e])}return b},e="undefined"!==typeof window?window:{},b="MediaStream HTMLImageElement HTMLVideoElement HTMLCanvasElement FileList File URL".split(" ").reduce(function(b,a){var d;return c({},b,(d={},d[a]=a in e?e[a]:function(){},d))},{});b.setObject=function(c,e){b[c]=e};g.a=
b},function(f,g,a){g.a=function(){function c(b){d[b]||(d[b]={subscribers:[]});return d[b]}function e(b,c){b.async?setTimeout(function(){b.callback(c)},4):b.callback(c)}function b(b,d,e){if("function"===typeof d)d={callback:d,async:e};else if(!d.callback)throw"Callback was not specified on options";c(b).subscribers.push(d)}var d={};return{subscribe:function(c,d,e){return b(c,d,e)},publish:function(b,d){var a=c(b),h=a.subscribers;h.filter(function(b){return!!b.once}).forEach(function(b){e(b,d)});a.subscribers=
h.filter(function(b){return!b.once});a.subscribers.forEach(function(b){e(b,d)})},once:function(c,d,e){b(c,{callback:d,async:e,once:!0})},unsubscribe:function(b,e){if(b){var a=c(b);a.subscribers=a&&e?a.subscribers.filter(function(b){return b.callback!==e}):[]}else d={}}}}},function(f,g,a){function c(c,b,d){d||(d={data:null,size:b});this.data=d.data;this.originalSize=d.size;this.I=d;this.from=c;this.size=b}c.prototype.show=function(c,b){var d,e;b||(b=1);var a=c.getContext("2d");c.width=this.size.x;
c.height=this.size.y;var l=a.getImageData(0,0,c.width,c.height);var m=l.data;for(d=0;d<this.size.y;d++)for(e=0;e<this.size.x;e++){var f=d*this.size.x+e;var n=this.get(e,d)*b;m[4*f]=n;m[4*f+1]=n;m[4*f+2]=n;m[4*f+3]=255}l.data=m;a.putImageData(l,0,0)};c.prototype.get=function(c,b){return this.data[(this.from.y+b)*this.originalSize.x+this.from.x+c]};c.prototype.updateData=function(c){this.originalSize=c.size;this.data=c.data};c.prototype.updateFrom=function(c){this.from=c;return this};g.a=c},function(f,
g){"undefined"!==typeof window&&(window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1E3/60)}}());Math.imul=Math.imul||function(a,c){var e=a&65535,b=c&65535;return e*b+((a>>>16&65535)*b+e*(c>>>16&65535)<<16>>>0)|0}},function(f,g,a){f.e={inputStream:{name:"Live",type:"LiveStream",constraints:{width:640,height:480,facingMode:"environment"},
area:{top:"0%",right:"0%",left:"0%",bottom:"0%"},singleChannel:!1},locate:!0,numOfWorkers:2,decoder:{readers:["code_128_reader"],debug:{drawBoundingBox:!1,showFrequency:!1,drawScanline:!1,showPattern:!1}},locator:{halfSample:!0,patchSize:"medium",debug:{showCanvas:!1,showPatches:!1,showFoundPatches:!1,showSkeleton:!1,showLabels:!1,showPatchLabels:!1,showRemainingPatchLabels:!1,boxFromPatches:{showTransformed:!1,showTransformedBox:!1,showBB:!1}}}}},function(f,g,a){var c=a(84),e=a(6);f=a(95);var b=
a(4),d=a(45),h=a(96),k=a(94),l=a(102),m=a(99),q=a(97),n=a(98),u=a(101);a=a(100);var r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol?"symbol":typeof b},t={code_128_reader:f.a,ean_reader:b.a,ean_5_reader:n.a,ean_2_reader:q.a,ean_8_reader:m.a,code_39_reader:d.a,code_39_vin_reader:h.a,codabar_reader:k.a,upc_reader:l.a,upc_e_reader:u.a,i2of5_reader:a.a};g.a={create:function(b,d){function a(){b.readers.forEach(function(b){var c=
{},d=[];if("object"===("undefined"===typeof b?"undefined":r(b))){var e=b.format;c=b.config}else"string"===typeof b&&(e=b);console.log("Before registering reader: ",e);c.supplements&&(d=c.supplements.map(function(b){return new t[b]}));f.push(new t[e](c,d))});console.log("Registered Readers: "+f.map(function(b){return JSON.stringify({format:b.FORMAT,config:b.config})}).join(", "))}function h(b,c,e){function a(d){var e=d*Math.sin(c);d*=Math.cos(c);b[0].y-=e;b[0].x-=d;b[1].y+=e;b[1].x+=d}for(a(e);1<e&&
(!d.inImageWithBorder(b[0],0)||!d.inImageWithBorder(b[1],0));)e-=Math.ceil(e/2),a(-e);return b}function k(a){var h=null,k=c.a.getBarcodeLine(d,a[0],a[1]);b.debug.showFrequency&&(e.a.drawPath(a,{x:"x",y:"y"},m.ctx.overlay,{color:"red",lineWidth:3}),c.a.debug.printFrequency(k.line,m.dom.frequency));c.a.toBinaryLine(k);b.debug.showPattern&&c.a.debug.printPattern(k.line,m.dom.pattern);for(a=0;a<f.length&&null===h;a++)h=f[a].decodePattern(k.line);return null===h?null:{codeResult:h,barcodeLine:k}}function l(c){var d=
m.ctx.overlay;b.debug.drawBoundingBox&&d&&e.a.drawPath(c,{x:0,y:1},d,{color:"blue",lineWidth:2});var a=[{x:(c[1][0]-c[0][0])/2+c[0][0],y:(c[1][1]-c[0][1])/2+c[0][1]},{x:(c[3][0]-c[2][0])/2+c[2][0],y:(c[3][1]-c[2][1])/2+c[2][1]}];var l=Math.sqrt(Math.pow(Math.abs(a[1].y-a[0].y),2)+Math.pow(Math.abs(a[1].x-a[0].x),2));var f=Math.atan2(a[1].y-a[0].y,a[1].x-a[0].x);a=h(a,f,Math.floor(.1*l));if(null===a)return null;l=k(a);if(null===l){l=a;c=Math.sqrt(Math.pow(c[1][0]-c[0][0],2)+Math.pow(c[1][1]-c[0][1],
2));var n;var g=null;var q=Math.sin(f),r=Math.cos(f);for(n=1;16>n&&null===g;n++){var u=c/16*n*(0===n%2?-1:1);g=u*q;u*=r;l[0].y+=u;l[0].x-=g;l[1].y+=u;l[1].x-=g;g=k(l)}l=g}if(null===l)return null;l&&b.debug.drawScanline&&d&&e.a.drawPath(a,{x:"x",y:"y"},d,{color:"red",lineWidth:3});return{codeResult:l.codeResult,line:a,angle:f,pattern:l.barcodeLine.line,threshold:l.barcodeLine.threshold}}var m={ctx:{frequency:null,pattern:null,overlay:null},dom:{frequency:null,pattern:null,overlay:null}},f=[];(function(){if("undefined"!==
typeof document){var b=document.querySelector("#debug.detection");m.dom.frequency=document.querySelector("canvas.frequency");m.dom.frequency||(m.dom.frequency=document.createElement("canvas"),m.dom.frequency.className="frequency",b&&b.appendChild(m.dom.frequency));m.ctx.frequency=m.dom.frequency.getContext("2d");m.dom.pattern=document.querySelector("canvas.patternBuffer");m.dom.pattern||(m.dom.pattern=document.createElement("canvas"),m.dom.pattern.className="patternBuffer",b&&b.appendChild(m.dom.pattern));
m.ctx.pattern=m.dom.pattern.getContext("2d");b&&(m.dom.overlay=document.querySelector("canvas.drawingBuffer"),m.dom.overlay||(m.dom.overlay=document.createElement("canvas"),m.dom.overlay.className="drawingBuffer",b.appendChild(m.dom.overlay)),m.ctx.overlay=m.dom.overlay.getContext("2d"))}})();a();(function(){if("undefined"!==typeof document){var c,d=[{node:m.dom.frequency,prop:b.debug.showFrequency},{node:m.dom.pattern,prop:b.debug.showPattern}];for(c=0;c<d.length;c++)d[c].node.style.display=!0===
d[c].prop?"block":"none"}})();return{decodeFromBoundingBox:function(b){return l(b)},decodeFromBoundingBoxes:function(c){var d,e=[],a=b.multiple;for(d=0;d<c.length;d++){var h=c[d];var k=l(h)||{};k.box=h;if(a)e.push(k);else if(k.codeResult)return k}if(a)return{barcodes:e}},setReaders:function(c){b.readers=c;f.length=0;a()}}}}},function(f,g,a){g.a={getBarcodeLine:function(c,e,b){function d(b,c){g=f[c*n+b];r=g<r?g:r;t=g>t?g:t;m.push(g)}var a=e.x|0,k=e.y|0;e=b.x|0;var l=b.y|0;b=Math.abs(l-k)>Math.abs(e-
a);var m=[],f=c.data,n=c.size.x,g,r=255,t=0;b&&(c=a,a=k,k=c,c=e,e=l,l=c);a>e&&(c=a,a=e,e=c,c=k,k=l,l=c);c=e-a;var p=Math.abs(l-k);var w=c/2|0;var B=k;for(k=k<l?1:-1;a<e;a++)b?d(B,a):d(a,B),w-=p,0>w&&(B+=k,w+=c);return{line:m,min:r,max:t}},toBinaryLine:function(c){var e=c.min,b=c.max;c=c.line;var d=e+(b-e)/2,a=[];e=(b-e)/12;var k=-e;var l=c[0]>d?1:-1;a.push({pos:0,val:c[0]});for(b=0;b<c.length-2;b++){var m=c[b+1]-c[b];var f=c[b+2]-c[b+1];m=m+f<k&&c[b+1]<1.5*d?-1:m+f>e&&c[b+1]>.5*d?1:l;l!==m&&(a.push({pos:b,
val:c[b]}),l=m)}a.push({pos:c.length,val:c[c.length-1]});for(l=a[0].pos;l<a[1].pos;l++)c[l]=c[l]>d?0:1;for(b=1;b<a.length-1;b++)for(e=a[b+1].val>a[b].val?a[b].val+(a[b+1].val-a[b].val)/3*2|0:a[b+1].val+(a[b].val-a[b+1].val)/3|0,l=a[b].pos;l<a[b+1].pos;l++)c[l]=c[l]>e?0:1;return{line:c,threshold:e}},debug:{printFrequency:function(c,a){var b,d=a.getContext("2d");a.width=c.length;a.height=256;d.beginPath();d.strokeStyle="blue";for(b=0;b<c.length;b++)d.moveTo(b,255),d.lineTo(b,255-c[b]);d.stroke();d.closePath()},
printPattern:function(c,a){var b=a.getContext("2d"),d;a.width=c.length;b.fillColor="black";for(d=0;d<c.length;d++)1===c[d]&&b.fillRect(d,0,1,100)}}}},function(f,g,a){function c(b){return new Promise(function(c,d){function a(){0<e?0<b.videoWidth&&0<b.videoHeight?(console.log(b.videoWidth+"px x "+b.videoHeight+"px"),c()):window.setTimeout(a,500):d("Unable to play video stream. Is webcam working?");e--}var e=10;a()})}function e(b,d){return navigator.mediaDevices&&"function"===typeof navigator.mediaDevices.getUserMedia?
navigator.mediaDevices.getUserMedia(d).then(function(c){return new Promise(function(d){h=c;b.setAttribute("autoplay","true");b.srcObject=c;b.addEventListener("loadedmetadata",function(){b.play();d()})})}).then(c.bind(null,b)):Promise.reject(Error("getUserMedia is not defined"))}var b=a(73),d=b&&b.__esModule?function(){return b["default"]}:function(){return b};Object.defineProperty(d,"a",{get:d});var h;g.a={request:function(b,c){var a=d.a.bind()(c,["width","height","facingMode","aspectRatio","deviceId"]);
"undefined"!==typeof c.minAspectRatio&&0<c.minAspectRatio&&(a.aspectRatio=c.minAspectRatio,console.log("WARNING: Constraint 'minAspectRatio' is deprecated; Use 'aspectRatio' instead"));"undefined"!==typeof c.facing&&(a.facingMode=c.facing,console.log("WARNING: Constraint 'facing' is deprecated. Use 'facingMode' instead'"));return e(b,{audio:!1,video:a})},release:function(){var b=h&&h.getVideoTracks();b&&b.length&&b[0].stop();h=null}}},function(f,g,a){function c(b,c){var d=2>=arguments.length||void 0===
arguments[2]?{}:arguments[2],a={inputStream:p.a.bind()({type:"ImageStream",sequence:!1,size:800},c),numOfWorkers:b.debug?0:1};return p.a.bind()(b,a,{numOfWorkers:"number"===typeof b.numOfWorkers&&0<b.numOfWorkers?1:0},{inputStream:n.a.bind()(r.a.bind()(b.inputStream,["size"]),m.a)},{inputStream:d})}function e(b,d,a){var e=a.src;a=(a.mime.match(/^(video|image)\/(.*)$/i)||[])[1];if("video"===a)return h(b,{src:e},d);if("image"===a)return c(b,{src:e},d);throw Error('Source with mimetype: "'+a+'" not supported');
}function b(b,c,d){var a=w.a.URL.createObjectURL(d);return e(b,c,{src:a,mime:d.type})}function d(b){var d=1>=arguments.length||void 0===arguments[1]?{}:arguments[1],a=arguments[2],k=(a.match(v.regex)||[])[1];if(k)return e(b,d,{src:a,mime:k});if(a.match(y.regex))throw Error('Source "objectURL": not supported');if(k=(a.match(x.regex)||[])[2]){if(k.match(A.regex))d=c(b,{src:a},d);else if(k.match(E.regex))d=h(b,{src:a},d);else throw Error('Source "MediaString": not recognized');return d}throw Error('Source "'+
a+'": not recognized');}function h(b,c){var d=2>=arguments.length||void 0===arguments[2]?{}:arguments[2];return p.a.bind()({},b,{inputStream:p.a.bind()({type:"VideoStream"},c)},{inputStream:d})}function k(b){var c=1>=arguments.length||void 0===arguments[1]?{}:arguments[1];return p.a.bind()({},b,{inputStream:{type:"LiveStream",constraints:{width:640,height:480,facingMode:"environment"}}},{inputStream:c})}var l=a(195),m=l&&l.__esModule?function(){return l["default"]}:function(){return l};Object.defineProperty(m,
"a",{get:m});var q=a(199),n=q&&q.__esModule?function(){return q["default"]}:function(){return q};Object.defineProperty(n,"a",{get:n});var u=a(73),r=u&&u.__esModule?function(){return u["default"]}:function(){return u};Object.defineProperty(r,"a",{get:r});var t=a(15),p=t&&t.__esModule?function(){return t["default"]}:function(){return t};Object.defineProperty(p,"a",{get:p});var w=a(78);g.a=function(c,a,e){if(e instanceof w.a.MediaStream)throw Error('Source "MediaStream": not implemented!');if(e instanceof
w.a.HTMLImageElement)throw Error('Source "HTMLImageElement": not yet supported');if(e instanceof w.a.HTMLVideoElement)throw Error('Source "HTMLVideoElement": not yet supported');if(e instanceof w.a.HTMLCanvasElement)throw Error('Source "Canvas": not implemented!');if(e instanceof w.a.FileList){if(0<e.length)return b(c,a,e[0])}else{if(e instanceof w.a.File)return b(c,a,e);if("string"===typeof e)return d(c,a,e);if("object"!==("undefined"===typeof e?"undefined":B(e))||"undefined"===typeof e.constraints&&
"undefined"===typeof e.area)throw Error("No source given!");return k(c,e)}};var B="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(b){return typeof b}:function(b){return b&&"function"===typeof Symbol&&b.constructor===Symbol?"symbol":typeof b},v={regex:/^\s*data:([a-z]+\/[a-z0-9\-\+]+(;[a-z\-]+=[a-z0-9\-]+)?)?(;base64)?,[a-z0-9!\$&',\(\)\*\+,;=\-\._~:@\/\?%\s]*\s*$/i},y={regex:/^\s*blob:(.*)$/i},x={regex:/^(?:(?:http[s]?|ftp):\/)?\/?(?:(?:[^:\/\s]+)(?:(?:\/\w+)*\/))?([\w\-]+\.([^#?\s]+))(?:.*)?(?:#[\w\-]+)?$/i},
A={regex:/(jpe?g|png|gif|tiff)(?:\s+|$)/i},E={regex:/(webm|ogg|mp4|m4v)/i}},function(f,g,a){function c(b){return new Promise(function(c){var d=new FileReader;d.onload=function(b){return c(b.target.result)};d.readAsArrayBuffer(b)})}function e(b){return new Promise(function(c,d){var a=new XMLHttpRequest;a.open("GET",b,!0);a.responseType="blob";a.onreadystatechange=function(){a.readyState!==XMLHttpRequest.DONE||200!==a.status&&0!==a.status||c(this.response)};a.onerror=d;a.send()})}function b(b){var c=
1>=arguments.length||void 0===arguments[1]?k:arguments[1],a=new DataView(b),e=b.byteLength;c=c.reduce(function(b,c){var d=Object.keys(h).filter(function(b){return h[b]===c})[0];d&&(b[d]=c);return b},{});var l=2,f=void 0;if(255!==a.getUint8(0)||216!==a.getUint8(1))return!1;for(;l<e;){if(255!==a.getUint8(l))return!1;f=a.getUint8(l+1);if(225===f)return d(a,l+4,c);l+=2+a.getUint16(l+2)}}function d(b,c,d){for(var a="",e=c;e<c+4;e++)a+=String.fromCharCode(b.getUint8(e));if("Exif"!==a)return!1;c+=6;if(18761===
b.getUint16(c))a=!1;else if(19789===b.getUint16(c))a=!0;else return!1;if(42!==b.getUint16(c+2,!a))return!1;e=b.getUint32(c+4,!a);if(8>e)return!1;c+=e;e=b.getUint16(c,!a);for(var h={},k=0;k<e;k++){var l=c+12*k+2,m=d[b.getUint16(l,!a)];if(m){a:{var f=b;var g=a,q=f.getUint16(l+2,!g),x=f.getUint32(l+4,!g);switch(q){case 3:if(1===x){f=f.getUint16(l+8,!g);break a}}f=void 0}h[m]=f}}return h}g.a=function(d){var a=1>=arguments.length||void 0===arguments[1]?k:arguments[1];return/^blob:/i.test(d)?e(d).then(c).then(function(c){return b(c,
a)}):Promise.resolve(null)};var h={274:"orientation"},k=Object.keys(h).map(function(b){return h[b]})},function(f,g,a){var c=a(26),e=Math.PI/180;g.a={create:function(b,d){var a={},k=b.getConfig(),l=c.f.bind()(b.getRealWidth(),b.getRealHeight()),m=b.getCanvasSize(),f=c.f.bind()(b.getWidth(),b.getHeight()),g=b.getTopRight(),u=g.x,r=g.y,t=null,p=null;var w=d?d:document.createElement("canvas");w.width=m.x;w.height=m.y;t=w.getContext("2d");p=new Uint8Array(f.x*f.y);console.log("FrameGrabber",JSON.stringify({size:f,
topRight:g,videoSize:l,canvasSize:m}));a.attachData=function(b){p=b};a.getData=function(){return p};a.grab=function(){var d=k.halfSample,a=b.getFrame(),h=a,l=0;if(h){w.width!==m.x&&(console.log("WARNING: canvas-size needs to be adjusted"),w.width=m.x);w.height!==m.y&&(console.log("WARNING: canvas-size needs to be adjusted"),w.height=m.y);if("ImageStream"===k.type&&(h=a.img,a.tags&&a.tags.orientation))switch(a.tags.orientation){case 6:l=90*e;break;case 8:l=-90*e}0!==l?(t.translate(m.x/2,m.y/2),t.rotate(l),
t.drawImage(h,-m.y/2,-m.x/2,m.y,m.x),t.rotate(-l),t.translate(-m.x/2,-m.y/2)):t.drawImage(h,0,0,m.x,m.y);a=t.getImageData(u,r,f.x,f.y).data;d?c.i.bind()(a,f,p):c.j.bind()(a,p,k);return!0}return!1};a.getSize=function(){return f};return a}}},function(f,g,a){function c(b,c){b.onload=function(){c.loaded(this)}}var e=a(87);g.a={load:function(b,d,a,k,l){var h=Array(k),f=Array(h.length);if(!1===l)h[0]=b;else for(k=0;k<h.length;k++){var g=a+k;h[k]=b+"image-"+("00"+g).slice(-3)+".jpg"}f.notLoaded=[];f.addImage=
function(b){f.notLoaded.push(b)};f.loaded=function(c){for(var a=f.notLoaded,k=0;k<a.length;k++)if(a[k]===c){a.splice(k,1);for(k=0;k<h.length;k++){var m=h[k].substr(h[k].lastIndexOf("/"));if(-1!==c.src.lastIndexOf(m)){f[k]={img:c};break}}break}0===a.length&&(console.log("Images loaded"),!1===l?e.a.bind()(b,["orientation"]).then(function(b){f[0].tags=b;d(f)})["catch"](function(b){console.log(b);d(f)}):d(f))};for(k=0;k<h.length;k++)a=new Image,f.addImage(a),c(a,f),a.src=h[k]}}},function(f,g,a){var c=
a(89),e={createVideoStream:function(b){var c={},a=null,e=["canrecord","ended"],l={},f,g,n={x:0,y:0},u={x:0,y:0};c.getRealWidth=function(){return b.videoWidth};c.getRealHeight=function(){return b.videoHeight};c.getWidth=function(){return f};c.getHeight=function(){return g};c.setWidth=function(b){f=b};c.setHeight=function(b){g=b};c.setInputStream=function(c){a=c;b.src="undefined"!==typeof c.src?c.src:""};c.ended=function(){return b.ended};c.getConfig=function(){return a};c.setAttribute=function(c,d){b.setAttribute(c,
d)};c.pause=function(){b.pause()};c.play=function(){b.play()};c.setCurrentTime=function(c){"LiveStream"!==a.type&&(b.currentTime=c)};c.addEventListener=function(c,d,a){-1!==e.indexOf(c)?(l[c]||(l[c]=[]),l[c].push(d)):b.addEventListener(c,d,a)};c.clearEventHandlers=function(){e.forEach(function(c){var d=l[c];d&&0<d.length&&d.forEach(function(d){b.removeEventListener(c,d)})})};c.trigger=function(d,e){var h=l[d];if("canrecord"===d){var k=b.videoWidth;var m=b.videoHeight;f=a.size?1<k/m?a.size:Math.floor(k/
m*a.size):k;g=a.size?1<k/m?Math.floor(m/k*a.size):a.size:m;u.x=f;u.y=g}if(h&&0<h.length)for(k=0;k<h.length;k++)h[k].apply(c,e)};c.setTopRight=function(b){n.x=b.x;n.y=b.y};c.getTopRight=function(){return n};c.setCanvasSize=function(b){u.x=b.x;u.y=b.y};c.getCanvasSize=function(){return u};c.getFrame=function(){return b};return c},createLiveStream:function(b){b.setAttribute("autoplay",!0);b=e.createVideoStream(b);b.ended=function(){return!1};return b},createImageStream:function(){function b(){u=!1;c.a.load(p,
function(b){r=b;if(b[0].tags&&b[0].tags.orientation)switch(b[0].tags.orientation){case 6:case 8:l=b[0].img.height;f=b[0].img.width;break;default:l=b[0].img.width,f=b[0].img.height}else l=b[0].img.width,f=b[0].img.height;B=e.size?1<l/f?e.size:Math.floor(l/f*e.size):l;v=e.size?1<l/f?Math.floor(f/l*e.size):e.size:f;E.x=B;E.y=v;u=!0;g=0;setTimeout(function(){d("canrecord",[])},0)},1,t,e.sequence)}function d(b,c){var d,e=x[b];if(e&&0<e.length)for(d=0;d<e.length;d++)e[d].apply(a,c)}var a={},e=null,l=0,
f=0,g=0,n=!0,u=!1,r=null,t=0,p=null,w=!1,B,v,y=["canrecord","ended"],x={},A={x:0,y:0},E={x:0,y:0};a.trigger=d;a.getWidth=function(){return B};a.getHeight=function(){return v};a.setWidth=function(b){B=b};a.setHeight=function(b){v=b};a.getRealWidth=function(){return l};a.getRealHeight=function(){return f};a.setInputStream=function(c){e=c;!1===c.sequence?(p=c.src,t=1):(p=c.src,t=c.length);b()};a.ended=function(){return w};a.setAttribute=function(){};a.getConfig=function(){return e};a.pause=function(){n=
!0};a.play=function(){n=!1};a.setCurrentTime=function(b){g=b};a.addEventListener=function(b,c){-1!==y.indexOf(b)&&(x[b]||(x[b]=[]),x[b].push(c))};a.clearEventHandlers=function(){x={}};a.setTopRight=function(b){A.x=b.x;A.y=b.y};a.getTopRight=function(){return A};a.setCanvasSize=function(b){E.x=b.x;E.y=b.y};a.getCanvasSize=function(){return E};a.getFrame=function(){if(!u)return null;if(!n){var b=r[g];g<t-1?g++:setTimeout(function(){w=!0;d("ended",[])},0)}return b};return a}};g.a=e},function(f,g,a){(function(c){var e=
a(27),b=a(26),d=a(16),h=a(6),k=a(92),l=a(44),f=a(93);g.b=function(a,m){function g(b){var c=[];var d=[];for(d=0;d<b;d++)c.push(0);for(b=C.data.length;b--;)0<C.data[b]&&c[C.data[b]-1]++;c=c.map(function(b,c){return{val:b,label:c+1}});c.sort(function(b,c){return c.val-b.val});return d=c.filter(function(b){return 5<=b.val})}function u(c){c=b.d.bind()(c,.9);var d=b.e.bind()(c,1,function(b){return b.getPoints().length});c=[];var a=[];if(1===d.length)for(c=d[0].item.getPoints(),d=0;d<c.length;d++)a.push(c[d].point);
return a}function r(b,c,d,a){var e,k=[],h=[];var l=Math.ceil(z.x/3);if(2<=b.length){for(e=0;e<b.length;e++)b[e].m00>l&&k.push(b[e]);if(2<=k.length){var f=u(k);for(e=l=0;e<f.length;e++)l+=f[e].rad;1<f.length&&f.length>=k.length/4*3&&f.length>b.length/4&&(l/=f.length,b={index:c[1]*N.x+c[0],pos:{x:d,y:a},box:[q.clone([d,a]),q.clone([d+A.size.x,a]),q.clone([d+A.size.x,a+A.size.y]),q.clone([d,a+A.size.y])],moments:f,rad:l,vec:q.clone([Math.cos(l),Math.sin(l)])},h.push(b))}}return h}function B(c){function a(){var b;
for(b=0;b<C.data.length;b++)if(0===C.data[b]&&1===F.data[b])return b;return C.length}function e(b){var c=b%C.size.x,d=b/C.size.x|0;if(b<C.data.length){var a=J.data[b];C.data[b]=k;for(b=0;b<l.a.searchDirections.length;b++){var h=d+l.a.searchDirections[b][0];var f=c+l.a.searchDirections[b][1];f=h*C.size.x+f;0===F.data[f]?C.data[f]=Number.MAX_VALUE:0===C.data[f]&&(h=Math.abs(q.dot(J.data[f].vec,a.vec)),.95<h&&e(f))}}}var k=0,f=0,m=[0,1,1],g=[0,0,0];d.a.init(F.data,0);d.a.init(C.data,0);d.a.init(J.data,
null);for(f=0;f<c.length;f++){var n=c[f];J.data[n.index]=n;F.data[n.index]=1}for(F.zeroBorder();(f=a())<C.data.length;)k++,e(f);if(v.debug.showPatchLabels)for(f=0;f<C.data.length;f++)0<C.data[f]&&C.data[f]<=k&&(n=J.data[f],m[0]=C.data[f]/(k+1)*360,b.a.bind()(m,g),h.a.drawRect(n.pos,A.size,I.ctx.binary,{color:"rgb("+g.join(",")+")",lineWidth:2}));return k}var v=m,y,x,A,E,F,C,J,G,z,I={ctx:{binary:null},dom:{binary:null}},N={x:0,y:0},Q;(function(){y=v.halfSample?new e.a({x:a.size.x/2|0,y:a.size.y/2|
0}):a;z=b.b.bind()(v.patchSize,y.size);N.x=y.size.x/z.x|0;N.y=y.size.y/z.y|0;G=new e.a(y.size,void 0,Uint8Array,!1);E=new e.a(z,void 0,Array,!0);var d=new ArrayBuffer(65536);A=new e.a(z,new Uint8Array(d,0,z.x*z.y));x=new e.a(z,new Uint8Array(d,z.x*z.y*3,z.x*z.y),void 0,!0);Q=f.a.bind()("undefined"!==typeof window?window:"undefined"!==typeof self?self:c,{size:z.x},d);J=new e.a({x:y.size.x/A.size.x|0,y:y.size.y/A.size.y|0},void 0,Array,!0);F=new e.a(J.size,void 0,void 0,!0);C=new e.a(J.size,void 0,
Int32Array,!0)})();v.useWorker||"undefined"===typeof document||(I.dom.binary=document.createElement("canvas"),I.dom.binary.className="binaryBuffer",!0===v.debug.showCanvas&&document.querySelector("#debug").appendChild(I.dom.binary),I.ctx.binary=I.dom.binary.getContext("2d"),I.dom.binary.width=G.size.x,I.dom.binary.height=G.size.y);return{locate:function(){var c;v.halfSample&&b.g.bind()(a,y);b.c.bind()(y,G);G.zeroBorder();v.debug.showCanvas&&G.show(I.dom.binary,255);var e,f=[];for(c=0;c<N.x;c++)for(e=
0;e<N.y;e++){var l=A.size.x*c;var m=A.size.y*e;var u=l;var t=m;G.subImageAsCopy(A,b.f.bind()(u,t));Q.skeletonize();v.debug.showSkeleton&&x.overlay(I.dom.binary,360,b.f.bind()(u,t));x.zeroBorder();d.a.init(E.data,0);u=k.a.create(x,E);u=u.rasterize(0);v.debug.showLabels&&E.overlay(I.dom.binary,Math.floor(360/u.count),{x:l,y:m});u=E.moments(u.count);f=f.concat(r(u,[c,e],l,m))}if(v.debug.showFoundPatches)for(c=0;c<f.length;c++)e=f[c],h.a.drawRect(e.pos,A.size,I.ctx.binary,{color:"#99ff00",lineWidth:2});
c=f;if(c.length<N.x*N.y*.05)return null;f=B(c);if(1>f)return null;c=g(f);if(0===c.length)return null;l=[];m=[];u=[0,1,1];t=[0,0,0];for(e=0;e<c.length;e++){var p=C.data.length;for(l.length=0;p--;)if(C.data[p]===c[e].label){var w=J.data[p];l.push(w)}var z,D=l,F=G.size.x,P=G.size.y,X=-G.size.x,Y=-G.size.y;for(z=w=0;z<D.length;z++){var K=D[z];w+=K.rad;v.debug.showPatches&&h.a.drawRect(K.pos,A.size,I.ctx.binary,{color:"red"})}w/=D.length;w=(180*w/Math.PI+90)%180-90;0>w&&(w+=180);w=(180-w)*Math.PI/180;
w=n.copy(n.create(),[Math.cos(w),Math.sin(w),-Math.sin(w),Math.cos(w)]);for(z=0;z<D.length;z++){K=D[z];for(p=0;4>p;p++)q.transformMat2(K.box[p],K.box[p],w);v.debug.boxFromPatches.showTransformed&&h.a.drawPath(K.box,{x:0,y:1},I.ctx.binary,{color:"#99ff00",lineWidth:2})}for(z=0;z<D.length;z++)for(K=D[z],p=0;4>p;p++)K.box[p][0]<F&&(F=K.box[p][0]),K.box[p][0]>X&&(X=K.box[p][0]),K.box[p][1]<P&&(P=K.box[p][1]),K.box[p][1]>Y&&(Y=K.box[p][1]);z=[[F,P],[X,P],[X,Y],[F,Y]];v.debug.boxFromPatches.showTransformedBox&&
h.a.drawPath(z,{x:0,y:1},I.ctx.binary,{color:"#ff0000",lineWidth:2});K=v.halfSample?2:1;w=n.invert(w,w);for(p=0;4>p;p++)q.transformMat2(z[p],z[p],w);v.debug.boxFromPatches.showBB&&h.a.drawPath(z,{x:0,y:1},I.ctx.binary,{color:"#ff0000",lineWidth:2});for(p=0;4>p;p++)q.scale(z[p],z[p],K);if(w=z)if(m.push(w),v.debug.showRemainingPatchLabels)for(p=0;p<l.length;p++)w=l[p],u[0]=c[e].label/(f+1)*360,b.a.bind()(u,t),h.a.drawRect(w.pos,A.size,I.ctx.binary,{color:"rgb("+t.join(",")+")",lineWidth:2})}return m}}};
g.a=function(c,d){var a=c.getWidth(),e=c.getHeight(),k=d.halfSample?.5:1;if(c.getConfig().area){var h=b.h.bind()(a,e,c.getConfig().area);c.setTopRight({x:h.sx,y:h.sy});c.setCanvasSize({x:a,y:e});a=h.sw;e=h.sh}var f={x:Math.floor(a*k),y:Math.floor(e*k)};h=b.b.bind()(d.patchSize,f);console.log("Patch-Size: "+JSON.stringify(h));c.setWidth(Math.floor(1/k*Math.floor(f.x/h.x)*h.x));c.setHeight(Math.floor(1/k*Math.floor(f.y/h.y)*h.y));if(0===c.getWidth()%h.x&&0===c.getHeight()%h.y)return!0;throw Error("Image dimensions do not comply with the current settings: Width ("+
a+" )and height ("+e+") must a multiple of "+h.x);};var q={clone:a(8),dot:a(46),scale:a(107),transformMat2:a(108)},n={copy:a(104),create:a(105),invert:a(106)}}).call(g,function(){return this}())},function(f,g,a){var c=a(44),e={createContour2D:function(){return{dir:null,index:null,firstVertex:null,insideContours:null,nextpeer:null,prevpeer:null}},CONTOUR_DIR:{CW_DIR:0,CCW_DIR:1,UNKNOWN_DIR:2},DIR:{OUTSIDE_EDGE:-32767,INSIDE_EDGE:-32766},create:function(b,d){var a=b.data,k=d.data,f=b.size.x,m=b.size.y,
g=c.a.create(b,d);return{rasterize:function(b){var c,d,h,l=[],n=0;for(c=0;400>c;c++)l[c]=0;l[0]=a[0];var q=null;for(h=1;h<m-1;h++){var v=0;c=l[0];for(d=1;d<f-1;d++){var y=h*f+d;if(0===k[y]){var x=a[y];if(x!==c)if(0===v)y=n+1,c=l[y]=x,x=g.contourTracing(h,d,y,x,e.DIR.OUTSIDE_EDGE),null!==x&&(n++,v=y,y=e.createContour2D(),y.dir=e.CONTOUR_DIR.CW_DIR,y.index=v,y.firstVertex=x,y.nextpeer=q,y.insideContours=null,null!==q&&(q.prevpeer=y),q=y);else{if(x=g.contourTracing(h,d,e.DIR.INSIDE_EDGE,x,v),null!==
x){y=e.createContour2D();y.firstVertex=x;y.insideContours=null;y.dir=0===b?e.CONTOUR_DIR.CCW_DIR:e.CONTOUR_DIR.CW_DIR;y.index=b;for(x=q;null!==x&&x.index!==v;)x=x.nextpeer;null!==x&&(y.nextpeer=x.insideContours,null!==x.insideContours&&(x.insideContours.prevpeer=y),x.insideContours=y)}}else k[y]=v}else k[y]===e.DIR.OUTSIDE_EDGE||k[y]===e.DIR.INSIDE_EDGE?(v=0,c=k[y]===e.DIR.INSIDE_EDGE?a[y]:l[0]):(v=k[y],c=l[v])}}for(x=q;null!==x;)x.index=b,x=x.nextpeer;return{cc:q,count:n}},debug:{drawContour:function(b,
c){var d=b.getContext("2d"),a=c,k;d.strokeStyle="red";d.fillStyle="red";d.lineWidth=1;for(k=null!==a?a.insideContours:null;null!==a;){if(null!==k){var h=k;k=k.nextpeer}else h=a,a=a.nextpeer,k=null!==a?a.insideContours:null;switch(h.dir){case e.CONTOUR_DIR.CW_DIR:d.strokeStyle="red";break;case e.CONTOUR_DIR.CCW_DIR:d.strokeStyle="blue";break;case e.CONTOUR_DIR.UNKNOWN_DIR:d.strokeStyle="green"}var f=h.firstVertex;d.beginPath();d.moveTo(f.x,f.y);do f=f.next,d.lineTo(f.x,f.y);while(f!==h.firstVertex);
d.stroke()}}}}}};g.a=e},function(f,g,a){g.a=function(c,a,b){"use asm";var d=new c.Uint8Array(b),e=a.size|0,k=c.Math.imul;return{skeletonize:function(){var b=k(e,e)|0;var c=b+b|0;var a=c+b|0;var h=a|0;var f=0;var g;for(g=k(e,e)|0;0<(g|0);)g=g-1|0,d[h+g|0]=f;for(f=g=h=0;(f|0)<(e-1|0);f=f+1|0)d[h+f|0]=0,d[h+g|0]=0,g=g+e-1|0,d[h+g|0]=0,g=g+1|0;for(f=0;(f|0)<(e|0);f=f+1|0)d[h+g|0]=0,g=g+1|0;do{h=0;f=b;h|=0;f|=0;var t,p=0;for(g=1;(g|0)<(e-1|0);g=g+1|0)for(p=p+e|0,t=1;(t|0)<(e-1|0);t=t+1|0){var w=p-e|0;
var B=p+e|0;var v=t-1|0;var y=t+1|0;w=(d[h+w+v|0]|0)+(d[h+w+y|0]|0)+(d[h+p+t|0]|0)+(d[h+B+v|0]|0)+(d[h+B+y|0]|0)|0;d[f+p+t|0]=5==(w|0)?1:0}h=b;f=c;h|=0;f|=0;p=0;for(g=1;(g|0)<(e-1|0);g=g+1|0)for(p=p+e|0,t=1;(t|0)<(e-1|0);t=t+1|0)w=p-e|0,B=p+e|0,v=t-1|0,y=t+1|0,w=(d[h+w+v|0]|0)+(d[h+w+y|0]|0)+(d[h+p+t|0]|0)+(d[h+B+v|0]|0)+(d[h+B+y|0]|0)|0,d[f+p+t|0]=0<(w|0)?1:0;h=0;g=f=c;h|=0;f|=0;g|=0;for(t=k(e,e)|0;0<(t|0);)t=t-1|0,d[g+t|0]=(d[h+t|0]|0)-(d[f+t|0]|0)|0;h=a;f=c;g=a;h|=0;f|=0;g|=0;for(t=k(e,e)|0;0<
(t|0);)t=t-1|0,d[g+t|0]=d[h+t|0]|0|d[f+t|0]|0;h=b;f=0;h|=0;f|=0;for(g=k(e,e)|0;0<(g|0);)g=g-1|0,d[f+g|0]=d[h+g|0]|0;h=0;h|=0;f=0;for(g=k(e,e)|0;0<(g|0);)g=g-1|0,f=(f|0)+(d[h+g|0]|0)|0;h=f|0;h=0==(h|0)|0}while(!h)}}}},function(f,g,a){function c(){e.a.call(this);this._counters=[]}var e=a(7);c.prototype=Object.create(e.a.prototype,{ALPHABETH_STRING:{value:"0123456789-$:/.+ABCD"},ALPHABET:{value:[48,49,50,51,52,53,54,55,56,57,45,36,58,47,46,43,65,66,67,68]},CHARACTER_ENCODINGS:{value:[3,6,9,96,18,66,
33,36,48,72,12,24,69,81,84,21,26,41,11,14]},START_END:{value:[26,41,11,14]},MIN_ENCODED_CHARS:{value:4},MAX_ACCEPTABLE:{value:2},PADDING:{value:1.5},FORMAT:{value:"codabar",writeable:!1}});c.prototype.constructor=c;c.prototype._decode=function(){var b=[];this._counters=this._fillCounters();var c=this._findStart();if(!c)return null;var a=c.startCounter;do{var e=this._toPattern(a);if(0>e)return null;var f=this._patternToChar(e);if(0>f)return null;b.push(f);a+=8;if(1<b.length&&this._isStartEnd(e))break}while(a<
this._counters.length);if(b.length-2<this.MIN_ENCODED_CHARS||!this._isStartEnd(e)||!this._verifyWhitespace(c.startCounter,a-8)||!this._validateResult(b,c.startCounter))return null;a=a>this._counters.length?this._counters.length:a;f=c.start+this._sumCounters(c.startCounter,a-8);return{code:b.join(""),start:c.start,end:f,startInfo:c,decodedCodes:b}};c.prototype._verifyWhitespace=function(b,c){if(0>=b-1||this._counters[b-1]>=this._calculatePatternLength(b)/2)if(c+8>=this._counters.length||this._counters[c+
7]>=this._calculatePatternLength(c)/2)return!0;return!1};c.prototype._calculatePatternLength=function(b){var c,a=0;for(c=b;c<b+7;c++)a+=this._counters[c];return a};c.prototype._thresholdResultPattern=function(b,c){var a=this,d={space:{narrow:{size:0,counts:0,min:0,max:Number.MAX_VALUE},wide:{size:0,counts:0,min:0,max:Number.MAX_VALUE}},bar:{narrow:{size:0,counts:0,min:0,max:Number.MAX_VALUE},wide:{size:0,counts:0,min:0,max:Number.MAX_VALUE}}},e,f,g=c;for(e=0;e<b.length;e++){var n=a._charToPattern(b[e]);
for(f=6;0<=f;f--){var u=2===(f&1)?d.bar:d.space;u=1===(n&1)?u.wide:u.narrow;u.size+=a._counters[g+f];u.counts++;n>>=1}g+=8}["space","bar"].forEach(function(b){b=d[b];b.wide.min=Math.floor((b.narrow.size/b.narrow.counts+b.wide.size/b.wide.counts)/2);b.narrow.max=Math.ceil(b.wide.min);b.wide.max=Math.ceil((b.wide.size*a.MAX_ACCEPTABLE+a.PADDING)/b.wide.counts)});return d};c.prototype._charToPattern=function(b){b=b.charCodeAt(0);var c;for(c=0;c<this.ALPHABET.length;c++)if(this.ALPHABET[c]===b)return this.CHARACTER_ENCODINGS[c];
return 0};c.prototype._validateResult=function(b,c){var a=this._thresholdResultPattern(b,c),d,e,f=c;for(d=0;d<b.length;d++){var g=this._charToPattern(b[d]);for(e=6;0<=e;e--){var n=0===(e&1)?a.bar:a.space;n=1===(g&1)?n.wide:n.narrow;var u=this._counters[f+e];if(u<n.min||u>n.max)return!1;g>>=1}f+=8}return!0};c.prototype._patternToChar=function(b){var c;for(c=0;c<this.CHARACTER_ENCODINGS.length;c++)if(this.CHARACTER_ENCODINGS[c]===b)return String.fromCharCode(this.ALPHABET[c]);return-1};c.prototype._computeAlternatingThreshold=
function(b,c){var a,d=Number.MAX_VALUE,e=0;for(a=b;a<c;a+=2){var f=this._counters[a];f>e&&(e=f);f<d&&(d=f)}return(d+e)/2|0};c.prototype._toPattern=function(b){var c=b+7,a=64,e=0,f;if(c>this._counters.length)return-1;var m=this._computeAlternatingThreshold(b,c);c=this._computeAlternatingThreshold(b+1,c);for(f=0;7>f;f++){var g=0===(f&1)?m:c;this._counters[b+f]>g&&(e|=a);a>>=1}return e};c.prototype._isStartEnd=function(b){var c;for(c=0;c<this.START_END.length;c++)if(this.START_END[c]===b)return!0;return!1};
c.prototype._sumCounters=function(b,c){var a,d=0;for(a=b;a<c;a++)d+=this._counters[a];return d};c.prototype._findStart=function(){var b,c=this._nextUnset(this._row);for(b=1;b<this._counters.length;b++){var a=this._toPattern(b);if(-1!==a&&this._isStartEnd(a))return c+=this._sumCounters(0,b),a=c+this._sumCounters(b,b+8),{start:c,end:a,startCounter:b,endCounter:b+8}}};g.a=c},function(f,g,a){function c(){b.a.call(this)}function e(b,c,a){for(var d=a.length,e=0,f=0;d--;)f+=b[a[d]],e+=c[a[d]];return f/e}
var b=a(7);c.prototype=Object.create(b.a.prototype,{CODE_SHIFT:{value:98},CODE_C:{value:99},CODE_B:{value:100},CODE_A:{value:101},START_CODE_A:{value:103},START_CODE_B:{value:104},START_CODE_C:{value:105},STOP_CODE:{value:106},CODE_PATTERN:{value:[[2,1,2,2,2,2],[2,2,2,1,2,2],[2,2,2,2,2,1],[1,2,1,2,2,3],[1,2,1,3,2,2],[1,3,1,2,2,2],[1,2,2,2,1,3],[1,2,2,3,1,2],[1,3,2,2,1,2],[2,2,1,2,1,3],[2,2,1,3,1,2],[2,3,1,2,1,2],[1,1,2,2,3,2],[1,2,2,1,3,2],[1,2,2,2,3,1],[1,1,3,2,2,2],[1,2,3,1,2,2],[1,2,3,2,2,1],[2,
2,3,2,1,1],[2,2,1,1,3,2],[2,2,1,2,3,1],[2,1,3,2,1,2],[2,2,3,1,1,2],[3,1,2,1,3,1],[3,1,1,2,2,2],[3,2,1,1,2,2],[3,2,1,2,2,1],[3,1,2,2,1,2],[3,2,2,1,1,2],[3,2,2,2,1,1],[2,1,2,1,2,3],[2,1,2,3,2,1],[2,3,2,1,2,1],[1,1,1,3,2,3],[1,3,1,1,2,3],[1,3,1,3,2,1],[1,1,2,3,1,3],[1,3,2,1,1,3],[1,3,2,3,1,1],[2,1,1,3,1,3],[2,3,1,1,1,3],[2,3,1,3,1,1],[1,1,2,1,3,3],[1,1,2,3,3,1],[1,3,2,1,3,1],[1,1,3,1,2,3],[1,1,3,3,2,1],[1,3,3,1,2,1],[3,1,3,1,2,1],[2,1,1,3,3,1],[2,3,1,1,3,1],[2,1,3,1,1,3],[2,1,3,3,1,1],[2,1,3,1,3,1],
[3,1,1,1,2,3],[3,1,1,3,2,1],[3,3,1,1,2,1],[3,1,2,1,1,3],[3,1,2,3,1,1],[3,3,2,1,1,1],[3,1,4,1,1,1],[2,2,1,4,1,1],[4,3,1,1,1,1],[1,1,1,2,2,4],[1,1,1,4,2,2],[1,2,1,1,2,4],[1,2,1,4,2,1],[1,4,1,1,2,2],[1,4,1,2,2,1],[1,1,2,2,1,4],[1,1,2,4,1,2],[1,2,2,1,1,4],[1,2,2,4,1,1],[1,4,2,1,1,2],[1,4,2,2,1,1],[2,4,1,2,1,1],[2,2,1,1,1,4],[4,1,3,1,1,1],[2,4,1,1,1,2],[1,3,4,1,1,1],[1,1,1,2,4,2],[1,2,1,1,4,2],[1,2,1,2,4,1],[1,1,4,2,1,2],[1,2,4,1,1,2],[1,2,4,2,1,1],[4,1,1,2,1,2],[4,2,1,1,1,2],[4,2,1,2,1,1],[2,1,2,1,4,
1],[2,1,4,1,2,1],[4,1,2,1,2,1],[1,1,1,1,4,3],[1,1,1,3,4,1],[1,3,1,1,4,1],[1,1,4,1,1,3],[1,1,4,3,1,1],[4,1,1,1,1,3],[4,1,1,3,1,1],[1,1,3,1,4,1],[1,1,4,1,3,1],[3,1,1,1,4,1],[4,1,1,1,3,1],[2,1,1,4,1,2],[2,1,1,2,1,4],[2,1,1,2,3,2],[2,3,3,1,1,1,2]]},SINGLE_CODE_ERROR:{value:.64},AVG_CODE_ERROR:{value:.3},FORMAT:{value:"code_128",writeable:!1},MODULE_INDICES:{value:{bar:[0,2,4],space:[1,3,5]}}});c.prototype.constructor=c;c.prototype._decodeCode=function(b,c){var a=[0,0,0,0,0,0],d,f=!this._row[b],h=0,g=
{error:Number.MAX_VALUE,code:-1,start:b,end:b,correction:{bar:1,space:1}};for(d=b;d<this._row.length;d++)if(this._row[d]^f)a[h]++;else{if(h===a.length-1){c&&this._correct(a,c);for(f=0;f<this.CODE_PATTERN.length;f++)h=this._matchPattern(a,this.CODE_PATTERN[f]),h<g.error&&(g.code=f,g.error=h);g.end=d;if(-1===g.code||g.error>this.AVG_CODE_ERROR)break;this.CODE_PATTERN[g.code]&&(g.correction.bar=e(this.CODE_PATTERN[g.code],a,this.MODULE_INDICES.bar),g.correction.space=e(this.CODE_PATTERN[g.code],a,this.MODULE_INDICES.space));
return g}h++;a[h]=1;f=!f}return null};c.prototype._correct=function(b,c){this._correctBars(b,c.bar,this.MODULE_INDICES.bar);this._correctBars(b,c.space,this.MODULE_INDICES.space)};c.prototype._findStart=function(){var b=[0,0,0,0,0,0];var c=this._nextSet(this._row);for(var a=!1,f=0,m={error:Number.MAX_VALUE,code:-1,start:0,end:0,correction:{bar:1,space:1}},g,n,u;c<this._row.length;c++)if(this._row[c]^a)b[f]++;else{if(f===b.length-1){for(g=u=0;g<b.length;g++)u+=b[g];for(g=this.START_CODE_A;g<=this.START_CODE_C;g++)n=
this._matchPattern(b,this.CODE_PATTERN[g]),n<m.error&&(m.code=g,m.error=n);if(m.error<this.AVG_CODE_ERROR)return m.start=c-u,m.end=c,m.correction.bar=e(this.CODE_PATTERN[m.code],b,this.MODULE_INDICES.bar),m.correction.space=e(this.CODE_PATTERN[m.code],b,this.MODULE_INDICES.space),m;for(g=0;4>g;g++)b[g]=b[g+2];b[4]=0;b[5]=0;f--}else f++;b[f]=1;a=!a}return null};c.prototype._decode=function(){var b=this._findStart(),c=!1,a=[],e=0,f=[],g=[],n=!1,u=!0;if(null===b)return null;var r={code:b.code,start:b.start,
end:b.end,correction:{bar:b.correction.bar,space:b.correction.space}};g.push(r);var t=r.code;switch(r.code){case this.START_CODE_A:var p=this.CODE_A;break;case this.START_CODE_B:p=this.CODE_B;break;case this.START_CODE_C:p=this.CODE_C;break;default:return null}for(;!c;){var w=n;n=!1;r=this._decodeCode(r.end,r.correction);if(null!==r)switch(r.code!==this.STOP_CODE&&(u=!0),r.code!==this.STOP_CODE&&(f.push(r.code),e++,t+=e*r.code),g.push(r),p){case this.CODE_A:if(64>r.code)a.push(String.fromCharCode(32+
r.code));else if(96>r.code)a.push(String.fromCharCode(r.code-64));else switch(r.code!==this.STOP_CODE&&(u=!1),r.code){case this.CODE_SHIFT:n=!0;p=this.CODE_B;break;case this.CODE_B:p=this.CODE_B;break;case this.CODE_C:p=this.CODE_C;break;case this.STOP_CODE:c=!0}break;case this.CODE_B:if(96>r.code)a.push(String.fromCharCode(32+r.code));else switch(r.code!==this.STOP_CODE&&(u=!1),r.code){case this.CODE_SHIFT:n=!0;p=this.CODE_A;break;case this.CODE_A:p=this.CODE_A;break;case this.CODE_C:p=this.CODE_C;
break;case this.STOP_CODE:c=!0}break;case this.CODE_C:if(100>r.code)a.push(10>r.code?"0"+r.code:r.code);else switch(r.code!==this.STOP_CODE&&(u=!1),r.code){case this.CODE_A:p=this.CODE_A;break;case this.CODE_B:p=this.CODE_B;break;case this.STOP_CODE:c=!0}}else c=!0;w&&(p=p===this.CODE_A?this.CODE_B:this.CODE_A)}if(null===r)return null;r.end=this._nextUnset(this._row,r.end);if(!this._verifyTrailingWhitespace(r))return null;t-=e*f[f.length-1];if(t%103!==f[f.length-1]||!a.length)return null;u&&a.splice(a.length-
1,1);return{code:a.join(""),start:b.start,end:r.end,codeset:p,startInfo:b,decodedCodes:g,endInfo:r}};b.a.prototype._verifyTrailingWhitespace=function(b){var c=b.end+(b.end-b.start)/2;return c<this._row.length&&this._matchRange(b.end,c,0)?b:null};g.a=c},function(f,g,a){function c(){e.a.call(this)}var e=a(45),b=/[IOQ]/g,d=/[A-Z0-9]{17}/;c.prototype=Object.create(e.a.prototype);c.prototype.constructor=c;c.prototype._decode=function(){var c=e.a.prototype._decode.apply(this);if(!c)return null;var a=c.code;
if(!a)return null;a=a.replace(b,"");if(!a.match(d))return console.log("Failed AZ09 pattern code:",a),null;if(!this._checkChecksum(a))return null;c.code=a;return c};c.prototype._checkChecksum=function(b){return!!b};g.a=c},function(f,g,a){function c(){e.a.call(this)}var e=a(4);c.prototype=Object.create(e.a.prototype,{FORMAT:{value:"ean_2",writeable:!1}});c.prototype.constructor=c;c.prototype.decode=function(b,c){this._row=b;var a=0,e,d=c,f=this._row.length,g=[],n=[];for(e=0;2>e&&d<f;e++){var u=this._decodeCode(d);
if(!u)return null;n.push(u);g.push(u.code%10);u.code>=this.CODE_G_START&&(a|=1<<1-e);1!=e&&(d=this._nextSet(this._row,u.end),d=this._nextUnset(this._row,d))}return 2!=g.length||parseInt(g.join(""))%4!==a?null:{code:g.join(""),decodedCodes:n,end:u.end}};g.a=c},function(f,g,a){function c(){e.a.call(this)}var e=a(4),b=[24,20,18,17,12,6,3,10,9,5];c.prototype=Object.create(e.a.prototype,{FORMAT:{value:"ean_5",writeable:!1}});c.prototype.constructor=c;c.prototype.decode=function(c,a){this._row=c;var e=
0,d,f=a,h=this._row.length,g=[],u=[];for(d=0;5>d&&f<h;d++){var r=this._decodeCode(f);if(!r)return null;u.push(r);g.push(r.code%10);r.code>=this.CODE_G_START&&(e|=1<<4-d);4!=d&&(f=this._nextSet(this._row,r.end),f=this._nextUnset(this._row,f))}if(5!=g.length)return null;f=g.length;d=0;for(h=f-2;0<=h;h-=2)d+=g[h];d*=3;for(h=f-1;0<=h;h-=2)d+=g[h];a:{for(f=0;10>f;f++)if(e===b[f]){e=f;break a}e=null}return 3*d%10!==e?null:{code:g.join(""),decodedCodes:u,end:r.end}};g.a=c},function(f,g,a){function c(b,c){e.a.call(this,
b,c)}var e=a(4);c.prototype=Object.create(e.a.prototype,{FORMAT:{value:"ean_8",writeable:!1}});c.prototype.constructor=c;c.prototype._decodePayload=function(b,c,a){var e;for(e=0;4>e;e++){b=this._decodeCode(b.end,this.CODE_G_START);if(!b)return null;c.push(b.code);a.push(b)}b=this._findPattern(this.MIDDLE_PATTERN,b.end,!0,!1);if(null===b)return null;a.push(b);for(e=0;4>e;e++){b=this._decodeCode(b.end,this.CODE_G_START);if(!b)return null;a.push(b);c.push(b.code)}return b};g.a=c},function(f,g,a){function c(b){b=
d.a.bind()(e(),b);h.a.call(this,b);this.barSpaceRatio=[1,1];b.normalizeBarSpaceWidth&&(this.SINGLE_CODE_ERROR=.38,this.AVG_CODE_ERROR=.09)}function e(){var b={};Object.keys(c.CONFIG_KEYS).forEach(function(a){b[a]=c.CONFIG_KEYS[a]["default"]});return b}var b=a(15),d=b&&b.__esModule?function(){return b["default"]}:function(){return b};Object.defineProperty(d,"a",{get:d});var h=a(7);c.prototype=Object.create(h.a.prototype,{START_PATTERN:{value:[1,1,1,1]},STOP_PATTERN:{value:[1,1,3]},CODE_PATTERN:{value:[[1,
1,3,3,1],[3,1,1,1,3],[1,3,1,1,3],[3,3,1,1,1],[1,1,3,1,3],[3,1,3,1,1],[1,3,3,1,1],[1,1,1,3,3],[3,1,1,3,1],[1,3,1,3,1]]},SINGLE_CODE_ERROR:{value:.78,writable:!0},AVG_CODE_ERROR:{value:.38,writable:!0},MAX_CORRECTION_FACTOR:{value:5},FORMAT:{value:"i2of5"}});c.prototype.constructor=c;c.prototype._matchPattern=function(b,c){if(this.config.normalizeBarSpaceWidth){var a,e=[0,0],d=[0,0],f=[0,0],k=this.MAX_CORRECTION_FACTOR,g=1/k;for(a=0;a<b.length;a++)e[a%2]+=b[a],d[a%2]+=c[a];f[0]=d[0]/e[0];f[1]=d[1]/
e[1];f[0]=Math.max(Math.min(f[0],k),g);f[1]=Math.max(Math.min(f[1],k),g);this.barSpaceRatio=f;for(a=0;a<b.length;a++)b[a]*=this.barSpaceRatio[a%2]}return h.a.prototype._matchPattern.call(this,b,c)};c.prototype._findPattern=function(b,c,a,e){var d=[],f,h=0,k={error:Number.MAX_VALUE,code:-1,start:0,end:0},g,l=this.AVG_CODE_ERROR;a=a||!1;e=e||!1;c||(c=this._nextSet(this._row));for(f=0;f<b.length;f++)d[f]=0;for(f=c;f<this._row.length;f++)if(this._row[f]^a)d[h]++;else{if(h===d.length-1){for(g=c=0;g<d.length;g++)c+=
d[g];g=this._matchPattern(d,b);if(g<l)return k.error=g,k.start=f-c,k.end=f,k;if(e){for(g=0;g<d.length-2;g++)d[g]=d[g+2];d[d.length-2]=0;d[d.length-1]=0;h--}else break}else h++;d[h]=1;a=!a}return null};c.prototype._findStart=function(){var b=this._nextSet(this._row);for(var c;!c;){c=this._findPattern(this.START_PATTERN,b,!1,!0);if(!c)return null;b=Math.floor((c.end-c.start)/4);b=c.start-10*b;if(0<=b&&this._matchRange(b,c.start,0))return c;b=c.end;c=null}};c.prototype._verifyTrailingWhitespace=function(b){var c=
b.end+(b.end-b.start)/2;return c<this._row.length&&this._matchRange(b.end,c,0)?b:null};c.prototype._findEnd=function(){this._row.reverse();var b=this._findPattern(this.STOP_PATTERN);this._row.reverse();if(null===b)return null;var c=b.start;b.start=this._row.length-b.end;b.end=this._row.length-c;return null!==b?this._verifyTrailingWhitespace(b):null};c.prototype._decodePair=function(b){var c,a=[];for(c=0;c<b.length;c++){var d=this._decodeCode(b[c]);if(!d)return null;a.push(d)}return a};c.prototype._decodeCode=
function(b){var c,a=this.AVG_CODE_ERROR,d,e={error:Number.MAX_VALUE,code:-1,start:0,end:0};for(c=0;c<b.length;c++);for(d=0;d<this.CODE_PATTERN.length;d++)c=this._matchPattern(b,this.CODE_PATTERN[d]),c<e.error&&(e.code=d,e.error=c);if(e.error<a)return e};c.prototype._decodePayload=function(b,c,a){for(var d,e=0,f=b.length,h=[[0,0,0,0,0],[0,0,0,0,0]],g;e<f;){for(d=0;5>d;d++)h[0][d]=b[e]*this.barSpaceRatio[0],h[1][d]=b[e+1]*this.barSpaceRatio[1],e+=2;g=this._decodePair(h);if(!g)return null;for(d=0;d<
g.length;d++)c.push(g[d].code+""),a.push(g[d])}return g};c.prototype._verifyCounterLength=function(b){return 0===b.length%10};c.prototype._decode=function(){var b=[],c=[];var a=this._findStart();if(!a)return null;c.push(a);var d=this._findEnd();if(!d)return null;var e=this._fillCounters(a.end,d.start,!1);if(!this._verifyCounterLength(e)||!this._decodePayload(e,b,c)||0!==b.length%2||6>b.length)return null;c.push(d);return{code:b.join(""),start:a.start,end:d.end,startInfo:a,decodedCodes:c}};c.CONFIG_KEYS=
{normalizeBarSpaceWidth:{type:"boolean","default":!1,description:"If true, the reader tries to normalize thewidth-difference between bars and spaces"}};g.a=c},function(f,g,a){function c(b,c){e.a.call(this,b,c)}var e=a(4);c.prototype=Object.create(e.a.prototype,{CODE_FREQUENCY:{value:[[56,52,50,49,44,38,35,42,41,37],[7,11,13,14,19,25,28,21,22,26]]},STOP_PATTERN:{value:[1/6*7,1/6*7,1/6*7,1/6*7,1/6*7,1/6*7]},FORMAT:{value:"upc_e",writeable:!1}});c.prototype.constructor=c;c.prototype._decodePayload=function(b,
c,a){var d,e=0;for(d=0;6>d;d++){b=this._decodeCode(b.end);if(!b)return null;b.code>=this.CODE_G_START&&(b.code-=this.CODE_G_START,e|=1<<5-d);c.push(b.code);a.push(b)}return this._determineParity(e,c)?b:null};c.prototype._determineParity=function(b,c){var a,d;for(d=0;d<this.CODE_FREQUENCY.length;d++)for(a=0;a<this.CODE_FREQUENCY[d].length;a++)if(b===this.CODE_FREQUENCY[d][a])return c.unshift(d),c.push(a),!0;return!1};c.prototype._convertToUPCA=function(b){var c=[b[0]],a=b[b.length-2];c=2>=a?c.concat(b.slice(1,
3)).concat([a,0,0,0,0]).concat(b.slice(3,6)):3===a?c.concat(b.slice(1,4)).concat([0,0,0,0,0]).concat(b.slice(4,6)):4===a?c.concat(b.slice(1,5)).concat([0,0,0,0,0,b[5]]):c.concat(b.slice(1,6)).concat([0,0,0,0,a]);c.push(b[b.length-1]);return c};c.prototype._checksum=function(b){return e.a.prototype._checksum.call(this,this._convertToUPCA(b))};c.prototype._findEnd=function(b,c){return e.a.prototype._findEnd.call(this,b,!0)};c.prototype._verifyTrailingWhitespace=function(b){var c=b.end+(b.end-b.start)/
2;if(c<this._row.length&&this._matchRange(b.end,c,0))return b};g.a=c},function(f,g,a){function c(b,c){e.a.call(this,b,c)}var e=a(4);c.prototype=Object.create(e.a.prototype,{FORMAT:{value:"upc_a",writeable:!1}});c.prototype.constructor=c;c.prototype._decode=function(){var b=e.a.prototype._decode.call(this);return b&&b.code&&13===b.code.length&&"0"===b.code.charAt(0)?(b.code=b.code.substring(1),b):null};g.a=c},function(f,g,a){var c=a(15),e=c&&c.__esModule?function(){return c["default"]}:function(){return c};
Object.defineProperty(e,"a",{get:e});var b=a(27),d=a(91),h=a(83),k=a(79),l=a(85);a(6);a(42);var m=a(43),q=a(90),n=a(88),u=Object.assign||function(b){for(var c=1;c<arguments.length;c++){var a=arguments[c],e;for(e in a)Object.prototype.hasOwnProperty.call(a,e)&&(b[e]=a[e])}return b},r={clone:a(8)};g.a=function(){function c(c){M=c?c:new b.a({x:H.getWidth(),y:H.getHeight()});console.log(M.size);S=[r.clone([0,0]),r.clone([0,M.size.y]),r.clone([M.size.x,M.size.y]),r.clone([M.size.x,0])];P=d.b.bind()(M,
D.locator);aa=h.a.create(D.decoder,M)}function a(b){if("VideoStream"===D.inputStream.type){var c=document.createElement("video");H=q.a.createVideoStream(c)}else if("ImageStream"===D.inputStream.type)H=q.a.createImageStream();else if("LiveStream"===D.inputStream.type){var a=f();a&&(c=a.querySelector("video"),c||(c=document.createElement("video"),a.appendChild(c)));H=q.a.createLiveStream(c);l.a.request(c,D.inputStream.constraints).then(function(){H.trigger("canrecord")})["catch"](function(c){return b(c)})}H.setAttribute("preload",
"auto");H.setInputStream(D.inputStream);H.addEventListener("canrecord",g.bind(void 0,b))}function f(){var b=D.inputStream.target;return b&&b.nodeName&&1===b.nodeType?b:document.querySelector("string"===typeof b?b:"#interactive.viewport")}function g(b){d.a.bind()(H,D.locator);v(D);V=n.a.create(H,L.dom.image);Q(D.numOfWorkers,function(){0===D.numOfWorkers&&c();H.play();b()})}function v(){if("undefined"!==typeof document){var b=f();L.dom.image=document.querySelector("canvas.imgBuffer");L.dom.image||
(L.dom.image=document.createElement("canvas"),L.dom.image.className="imgBuffer",b&&"ImageStream"===D.inputStream.type&&b.appendChild(L.dom.image));L.ctx.image=L.dom.image.getContext("2d");L.dom.image.width=H.getCanvasSize().x;L.dom.image.height=H.getCanvasSize().y}}function y(b){function c(b){for(var c=b.length;c--;)b[c][0]+=d,b[c][1]+=f}function a(b){b[0].x+=d;b[0].y+=f;b[1].x+=d;b[1].y+=f}var e=H.getTopRight(),d=e.x,f=e.y;if(0!==d||0!==f){if(b.barcodes)for(e=0;e<b.barcodes.length;e++)y(b.barcodes[e]);
b.line&&2===b.line.length&&a(b.line);b.box&&c(b.box);if(b.boxes&&0<b.boxes.length)for(e=0;e<b.boxes.length;e++)c(b.boxes[e])}}function x(b,c){c&&Z&&(b.barcodes?b.barcodes.filter(function(b){return b.codeResult}).forEach(function(b){return x(b,c)}):b.codeResult&&Z.addResult(c,H.getCanvasSize(),b.codeResult))}function A(b){return b&&(b.barcodes?b.barcodes.some(function(b){return b.codeResult}):b.codeResult)}function E(b,c){var a=b;b&&W&&(y(b),x(b,c),a=b.barcodes||b);T.publish("processed",a);A(b)&&T.publish("detected",
a)}function F(){var b=D.locate?P.locate():[[r.clone(S[0]),r.clone(S[1]),r.clone(S[2]),r.clone(S[3])]];if(b){var c=(c=aa.decodeFromBoundingBoxes(b))||{};c.boxes=b;E(c,M.data)}else E()}function C(){var b;if(W){if(0<O.length)if(b=O.filter(function(b){return!b.busy})[0])V.attachData(b.imageData);else return;else V.attachData(M.data);V.grab()&&(b?(b.busy=!0,b.worker.postMessage({cmd:"process",imageData:b.imageData},[b.imageData.buffer])):F())}else F()}function J(){var b=null,c=1E3/(0===D.frequency?60:
D.frequency||60);R=!1;(function ba(a){b=b||a;R||(a>=b&&(b+=c,C()),window.requestAnimFrame(ba))})(performance.now())}function G(){W&&"LiveStream"===D.inputStream.type?J():C()}function z(b){var c={worker:void 0,imageData:new Uint8Array(H.getWidth()*H.getHeight()),busy:!0};var a=N();c.worker=new Worker(a);c.worker.onmessage=function(e){if("initialized"===e.data.event)return URL.revokeObjectURL(a),c.busy=!1,c.imageData=new Uint8Array(e.data.imageData),console.log("Worker initialized"),b(c);"processed"===
e.data.event?(c.imageData=new Uint8Array(e.data.imageData),c.busy=!1,E(e.data.result,c.imageData)):"error"===e.data.event&&console.log("Worker error: "+e.data.message)};c.worker.postMessage({cmd:"init",size:{x:H.getWidth(),y:H.getHeight()},imageData:c.imageData,config:u({},D,{inputStream:u({},D.inputStream,{target:null})})},[c.imageData.buffer])}function I(b){function c(b){self.postMessage({event:"processed",imageData:d.data,result:b},[d.data.buffer])}function a(){self.postMessage({event:"initialized",
imageData:d.data},[d.data.buffer])}if(b){var e=b()["default"];if(!e){self.postMessage({event:"error",message:"Quagga could not be created"});return}}var d,f=e._worker.createScanner();self.onmessage=function(b){if("init"===b.data.cmd){var h=b.data.config;h.numOfWorkers=0;d=new e.ImageWrapper({x:b.data.size.x,y:b.data.size.y},new Uint8Array(b.data.imageData));f.init(h,a,d);f.subscribe("processed",c)}else"process"===b.data.cmd&&(d.data=new Uint8Array(b.data.imageData),f.start())}}function N(){var b;
"undefined"!==typeof U&&(b=U);b=new Blob(["("+I.toString()+")("+b+");"],{type:"text/javascript"});return window.URL.createObjectURL(b)}function Q(b,c){var a=b-O.length;if(0===a)return c&&c();if(0>a)return O.slice(a).forEach(function(b){b.worker.terminate();console.log("Worker terminated!")}),O=O.slice(0,a),c&&c();for(var e=function(a){O.push(a);O.length>=b&&c&&c()},d=0;d<a;d++)z(e)}var H,V,R=!0,L={ctx:{image:null},dom:{image:null}},M,S,aa,O=[],W=!0,Z,D={},T=k.a.bind()(),P;return{init:function(b,d,
f){D=e.a.bind()({},m.a,b);if(f)return W=!1,c(f),d();a(d)},start:function(){G()},isRunning:function(){return!R},stop:function(){R=!0;Q(0);"LiveStream"===D.inputStream.type&&l.a.release();H.clearEventHandlers()},pause:function(){R=!0},subscribe:function(b,c){T.subscribe(b,c)},unsubscribe:function(b,c){T.unsubscribe(b,c)},registerResultCollector:function(b){b&&"function"===typeof b.addResult&&(Z=b)},decodeSingle:function(b,c){var a=this;this.init(b,function(){T.once("processed",function(b){a.stop();
c.call(null,b)},!0);G()})},canvas:L}}},function(f,g,a){f.e=function(c,a){c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];return c}},function(f,g,a){f.e=function(){var c=new Float32Array(4);c[0]=1;c[1]=0;c[2]=0;c[3]=1;return c}},function(f,g,a){f.e=function(c,a){var b=a[0],e=a[1],f=a[2],g=a[3],l=b*g-f*e;if(!l)return null;l=1/l;c[0]=g*l;c[1]=-e*l;c[2]=-f*l;c[3]=b*l;return c}},function(f,g,a){f.e=function(c,a,b){c[0]=a[0]*b;c[1]=a[1]*b;return c}},function(f,g,a){f.e=function(c,a,b){var d=a[0];a=a[1];c[0]=b[0]*
d+b[2]*a;c[1]=b[1]*d+b[3]*a;return c}},function(f,g,a){f.e=function(c){var a=new Float32Array(3);a[0]=c[0];a[1]=c[1];a[2]=c[2];return a}},function(f,g,a){g=a(5);a=a(3);a=g(a,"DataView");f.e=a},function(f,g,a){function c(b){var c=-1,a=b?b.length:0;for(this.clear();++c<a;){var d=b[c];this.set(d[0],d[1])}}g=a(160);var e=a(161),b=a(162),d=a(163);a=a(164);c.prototype.clear=g;c.prototype["delete"]=e;c.prototype.get=b;c.prototype.has=d;c.prototype.set=a;f.e=c},function(f,g,a){g=a(5);a=a(3);a=g(a,"Promise");
f.e=a},function(f,g,a){g=a(5);a=a(3);a=g(a,"Set");f.e=a},function(f,g,a){function c(b){var c=-1,a=b?b.length:0;for(this.__data__=new e;++c<a;)this.add(b[c])}var e=a(29);g=a(184);a=a(185);c.prototype.add=c.prototype.push=g;c.prototype.has=a;f.e=c},function(f,g,a){g=a(5);a=a(3);a=g(a,"WeakMap");f.e=a},function(f,g,a){f.e=function(c,a){c.set(a[0],a[1]);return c}},function(f,g,a){f.e=function(c,a){c.add(a);return c}},function(f,g,a){f.e=function(c,a,b){switch(b.length){case 0:return c.call(a);case 1:return c.call(a,
b[0]);case 2:return c.call(a,b[0],b[1]);case 3:return c.call(a,b[0],b[1],b[2])}return c.apply(a,b)}},function(f,g,a){f.e=function(c,a){for(var b=-1,d=c?c.length:0,e=Array(d);++b<d;)e[b]=a(c[b],b,c);return e}},function(f,g,a){f.e=function(c,a){for(var b=-1,d=c?c.length:0;++b<d;)if(a(c[b],b,c))return!0;return!1}},function(f,g,a){var c=a(32),e=a(14);f.e=function(b,a){return b&&c(a,e(a),b)}},function(f,g,a){function c(a,f,g,C,J,G,z){var A;C&&(A=G?C(a,J,G,z):C(a));if(void 0!==A)return A;if(!v(a))return a;
if(J=p(a)){if(A=u(a),!f)return l(a,A)}else{var E=n(a),F="[object Function]"==E||"[object GeneratorFunction]"==E;if(w(a))return k(a,f);if("[object Object]"==E||"[object Arguments]"==E||F&&!G){if(B(a))return G?a:{};A=t(F?{}:a);if(!f)return m(a,h(A,a))}else{if(!x[E])return G?a:{};A=r(a,E,c,f)}}z||(z=new e);if(G=z.get(a))return G;z.set(a,A);if(!J)var H=g?q(a):y(a);b(H||a,function(b,e){H&&(e=b,b=a[e]);d(A,e,c(b,f,g,C,e,a,z))});return A}var e=a(18),b=a(48),d=a(52),h=a(121),k=a(142),l=a(61),m=a(149),q=a(154),
n=a(35),u=a(165),r=a(166),t=a(167),p=a(0),w=a(71),B=a(22),v=a(2),y=a(14),x={};x["[object Arguments]"]=x["[object Array]"]=x["[object ArrayBuffer]"]=x["[object DataView]"]=x["[object Boolean]"]=x["[object Date]"]=x["[object Float32Array]"]=x["[object Float64Array]"]=x["[object Int8Array]"]=x["[object Int16Array]"]=x["[object Int32Array]"]=x["[object Map]"]=x["[object Number]"]=x["[object Object]"]=x["[object RegExp]"]=x["[object Set]"]=x["[object String]"]=x["[object Symbol]"]=x["[object Uint8Array]"]=
x["[object Uint8ClampedArray]"]=x["[object Uint16Array]"]=x["[object Uint32Array]"]=!0;x["[object Error]"]=x["[object Function]"]=x["[object WeakMap]"]=!1;f.e=c},function(f,g,a){var c=a(2),e=Object.create;f.e=function(b){return c(b)?e(b):{}}},function(f,g,a){function c(a,f,g,l,m){var d=-1,h=a.length;g||(g=b);for(m||(m=[]);++d<h;){var k=a[d];0<f&&g(k)?1<f?c(k,f-1,g,l,m):e(m,k):l||(m[m.length]=k)}return m}var e=a(30),b=a(168);f.e=c},function(f,g,a){var c=Object.prototype.toString;f.e=function(a){return c.call(a)}},
function(f,g,a){f.e=function(c,a){return null!=c&&a in Object(c)}},function(f,g,a){var c=a(18),e=a(62),b=a(152),d=a(153),h=a(35),k=a(0),l=a(22),m=a(41),q=Object.prototype.hasOwnProperty;f.e=function(a,f,g,t,p,w){var n=k(a),u=k(f),r="[object Array]",x="[object Array]";n||(r=h(a),r="[object Arguments]"==r?"[object Object]":r);u||(x=h(f),x="[object Arguments]"==x?"[object Object]":x);var A="[object Object]"==r&&!l(a);u="[object Object]"==x&&!l(f);if((x=r==x)&&!A)return w||(w=new c),n||m(a)?e(a,f,g,t,
p,w):b(a,f,r,g,t,p,w);if(!(p&2)&&(n=A&&q.call(a,"__wrapped__"),r=u&&q.call(f,"__wrapped__"),n||r))return a=n?a.value():a,f=r?f.value():f,w||(w=new c),g(a,f,t,p,w);if(!x)return!1;w||(w=new c);return d(a,f,g,t,p,w)}},function(f,g,a){var c=a(18),e=a(55);f.e=function(b,a,f,g){var d=f.length,h=d,k=!g;if(null==b)return!h;for(b=Object(b);d--;){var n=f[d];if(k&&n[2]?n[1]!==b[n[0]]:!(n[0]in b))return!1}for(;++d<h;){n=f[d];var u=n[0],r=b[u],t=n[1];if(k&&n[2]){if(void 0===r&&!(u in b))return!1}else{n=new c;
if(g)var p=g(r,t,u,b,a,n);if(void 0===p?!e(t,r,g,3,n):!p)return!1}}return!0}},function(f,g,a){var c=a(38),e=a(22),b=a(171),d=a(2),h=a(69),k=/^\[object .+?Constructor\]$/,l=RegExp("^"+Function.prototype.toString.call(Object.prototype.hasOwnProperty).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");f.e=function(a){return!d(a)||b(a)?!1:(c(a)||e(a)?l:k).test(h(a))}},function(f,g,a){var c=a(39),e=a(13),b={};b["[object Float32Array]"]=
b["[object Float64Array]"]=b["[object Int8Array]"]=b["[object Int16Array]"]=b["[object Int32Array]"]=b["[object Uint8Array]"]=b["[object Uint8ClampedArray]"]=b["[object Uint16Array]"]=b["[object Uint32Array]"]=!0;b["[object Arguments]"]=b["[object Array]"]=b["[object ArrayBuffer]"]=b["[object Boolean]"]=b["[object DataView]"]=b["[object Date]"]=b["[object Error]"]=b["[object Function]"]=b["[object Map]"]=b["[object Number]"]=b["[object Object]"]=b["[object RegExp]"]=b["[object Set]"]=b["[object String]"]=
b["[object WeakMap]"]=!1;var d=Object.prototype.toString;f.e=function(a){return e(a)&&c(a.length)&&!!b[d.call(a)]}},function(f,g,a){var c=a(24),e=a(67),b=Object.prototype.hasOwnProperty;f.e=function(a){if(!c(a))return e(a);var d=[],f;for(f in Object(a))b.call(a,f)&&"constructor"!=f&&d.push(f);return d}},function(f,g,a){var c=a(128),e=a(156),b=a(66);f.e=function(a){var d=e(a);return 1==d.length&&d[0][2]?b(d[0][0],d[0][1]):function(b){return b===a||c(b,a,d)}}},function(f,g,a){var c=a(55),e=a(192),b=
a(193),d=a(23),h=a(64),k=a(66),l=a(9);f.e=function(a,f){return d(a)&&h(f)?k(l(a),f):function(d){var g=e(d,a);return void 0===g&&g===f?b(d,a):c(f,g,void 0,3)}}},function(f,g,a){function c(a,f,g,t,p){if(a!==f){if(!l(f)&&!q(f))var n=h(f);b(n||f,function(b,h){n&&(h=b,b=f[h]);if(m(b))p||(p=new e),k(a,f,h,g,c,t,p);else{var l=t?t(a[h],b,h+"",a,f,p):void 0;void 0===l&&(l=b);d(a,h,l)}})}}var e=a(18),b=a(48),d=a(51),h=a(57),k=a(135),l=a(0),m=a(2),q=a(41);f.e=c},function(f,g,a){var c=a(51),e=a(122),b=a(61),
d=a(11),h=a(0),k=a(70),l=a(38),m=a(2),q=a(196),n=a(41),u=a(203);f.e=function(a,f,g,w,B,v,y){var r=a[g],p=f[g],t=y.get(p);if(t)c(a,g,t);else{f=v?v(r,p,g+"",a,f,y):void 0;if(t=void 0===f)f=p,h(p)||n(p)?h(r)?f=r:k(r)?f=b(r):(t=!1,f=e(p,!0)):q(p)||d(p)?d(r)?f=u(r):!m(r)||w&&l(r)?(t=!1,f=e(p,!0)):f=r:t=!1;t&&(y.set(p,f),B(f,p,w,v,y),y["delete"](p));c(a,g,f)}}},function(f,g,a){var c=a(58);f.e=function(a,b){a=Object(a);return c(a,b,function(b,c){return c in a})}},function(f,g,a){f.e=function(c){return function(a){return null==
a?void 0:a[c]}}},function(f,g,a){var c=a(53);f.e=function(a){return function(b){return c(b,a)}}},function(f,g,a){f.e=function(c,a){for(var b=-1,d=Array(c);++b<c;)d[b]=a(b);return d}},function(f,g,a){g=a(19);var c=a(40),e=1/0,b=(a=g?g.prototype:void 0)?a.toString:void 0;f.e=function(a){if("string"==typeof a)return a;if(c(a))return b?b.call(a):"";var d=a+"";return"0"==d&&1/a==-e?"-0":d}},function(f,g,a){f.e=function(c){return function(a){return c(a)}}},function(f,g,a){f.e=function(c,a){if(a)return c.slice();
var b=new c.constructor(c.length);c.copy(b);return b}},function(f,g,a){var c=a(31);f.e=function(a,b){var d=b?c(a.buffer):a.buffer;return new a.constructor(d,a.byteOffset,a.byteLength)}},function(f,g,a){var c=a(116),e=a(50),b=a(65);f.e=function(a,f,g){f=f?g(b(a),!0):b(a);return e(f,c,new a.constructor)}},function(f,g,a){var c=/\w*$/;f.e=function(a){var b=new a.constructor(a.source,c.exec(a));b.lastIndex=a.lastIndex;return b}},function(f,g,a){var c=a(117),e=a(50),b=a(68);f.e=function(a,f,g){f=f?g(b(a),
!0):b(a);return e(f,c,new a.constructor)}},function(f,g,a){var c=(g=(g=a(19))?g.prototype:void 0)?g.valueOf:void 0;f.e=function(a){return c?Object(c.call(a)):{}}},function(f,g,a){var c=a(31);f.e=function(a,b){var d=b?c(a.buffer):a.buffer;return new a.constructor(d,a.byteOffset,a.length)}},function(f,g,a){var c=a(32),e=a(34);f.e=function(b,a){return c(b,e(b),a)}},function(f,g,a){g=a(3)["__core-js_shared__"];f.e=g},function(f,g,a){var c=a(59),e=a(169);f.e=function(b){return c(function(c,a){var d=-1,
f=a.length,g=1<f?a[f-1]:void 0,h=2<f?a[2]:void 0;g=3<b.length&&"function"==typeof g?(f--,g):void 0;h&&e(a[0],a[1],h)&&(g=3>f?void 0:g,f=1);for(c=Object(c);++d<f;)(h=a[d])&&b(c,h,d,g);return c})}},function(f,g,a){g=a(19);var c=a(47),e=a(10),b=a(62),d=a(65),h=a(68),k=(a=g?g.prototype:void 0)?a.valueOf:void 0;f.e=function(a,f,g,n,u,r,t){switch(g){case "[object DataView]":if(a.byteLength!=f.byteLength||a.byteOffset!=f.byteOffset)break;a=a.buffer;f=f.buffer;case "[object ArrayBuffer]":if(a.byteLength!=
f.byteLength||!n(new c(a),new c(f)))break;return!0;case "[object Boolean]":case "[object Date]":case "[object Number]":return e(+a,+f);case "[object Error]":return a.name==f.name&&a.message==f.message;case "[object RegExp]":case "[object String]":return a==f+"";case "[object Map]":var l=d;case "[object Set]":l||(l=h);if(a.size!=f.size&&!(r&2))break;if(g=t.get(a))return g==f;r|=1;t.set(a,f);f=b(l(a),l(f),n,u,r,t);t["delete"](a);return f;case "[object Symbol]":if(k)return k.call(a)==k.call(f)}return!1}},
function(f,g,a){var c=a(14),e=Object.prototype.hasOwnProperty;f.e=function(b,a,f,g,l,m){var d=l&2,h=c(b),k=h.length,r=c(a).length;if(k!=r&&!d)return!1;for(var t=k;t--;){var p=h[t];if(!(d?p in a:e.call(a,p)))return!1}if((r=m.get(b))&&m.get(a))return r==a;r=!0;m.set(b,a);m.set(a,b);for(var w=d;++t<k;){p=h[t];var B=b[p],v=a[p];if(g)var y=d?g(v,B,p,a,b,m):g(B,v,p,b,a,m);if(void 0===y?B!==v&&!f(B,v,g,l,m):!y){r=!1;break}w||(w="constructor"==p)}r&&!w&&(f=b.constructor,g=a.constructor,f!=g&&"constructor"in
b&&"constructor"in a&&!("function"==typeof f&&f instanceof f&&"function"==typeof g&&g instanceof g)&&(r=!1));m["delete"](b);m["delete"](a);return r}},function(f,g,a){var c=a(54),e=a(34),b=a(14);f.e=function(a){return c(a,b,e)}},function(f,g,a){var c=a(54),e=a(157),b=a(72);f.e=function(a){return c(a,b,e)}},function(f,g,a){var c=a(64),e=a(14);f.e=function(b){for(var a=e(b),f=a.length;f--;){var g=a[f],l=b[g];a[f]=[g,l,c(l)]}return a}},function(f,g,a){var c=a(30),e=a(33),b=a(34);g=a(74);f.e=Object.getOwnPropertySymbols?
function(a){for(var d=[];a;)c(d,b(a)),a=e(a);return d}:g},function(f,g,a){f.e=function(c,a){return null==c?void 0:c[a]}},function(f,g,a){var c=a(60),e=a(11),b=a(0),d=a(36),h=a(23),k=a(39),l=a(9);f.e=function(a,f,g){f=h(f,a)?[f]:c(f);for(var m,n=-1,q=f.length;++n<q;){var p=l(f[n]);if(!(m=null!=a&&g(a,p)))break;a=a[p]}if(m)return m;q=a?a.length:0;return!!q&&k(q)&&d(p,q)&&(b(a)||e(a))}},function(f,g,a){var c=a(25);f.e=function(){this.__data__=c?c(null):{}}},function(f,g,a){f.e=function(c){return this.has(c)&&
delete this.__data__[c]}},function(f,g,a){var c=a(25),e=Object.prototype.hasOwnProperty;f.e=function(b){var a=this.__data__;return c?(b=a[b],"__lodash_hash_undefined__"===b?void 0:b):e.call(a,b)?a[b]:void 0}},function(f,g,a){var c=a(25),e=Object.prototype.hasOwnProperty;f.e=function(b){var a=this.__data__;return c?void 0!==a[b]:e.call(a,b)}},function(f,g,a){var c=a(25);f.e=function(a,b){this.__data__[a]=c&&void 0===b?"__lodash_hash_undefined__":b;return this}},function(f,g,a){var c=Object.prototype.hasOwnProperty;
f.e=function(a){var b=a.length,d=a.constructor(b);b&&"string"==typeof a[0]&&c.call(a,"index")&&(d.index=a.index,d.input=a.input);return d}},function(f,g,a){var c=a(31),e=a(143),b=a(144),d=a(145),h=a(146),k=a(147),l=a(148);f.e=function(a,f,g,u){var m=a.constructor;switch(f){case "[object ArrayBuffer]":return c(a);case "[object Boolean]":case "[object Date]":return new m(+a);case "[object DataView]":return e(a,u);case "[object Float32Array]":case "[object Float64Array]":case "[object Int8Array]":case "[object Int16Array]":case "[object Int32Array]":case "[object Uint8Array]":case "[object Uint8ClampedArray]":case "[object Uint16Array]":case "[object Uint32Array]":return l(a,
u);case "[object Map]":return b(a,u,g);case "[object Number]":case "[object String]":return new m(a);case "[object RegExp]":return d(a);case "[object Set]":return h(a,u,g);case "[object Symbol]":return k(a)}}},function(f,g,a){var c=a(123),e=a(33),b=a(24);f.e=function(a){return"function"!=typeof a.constructor||b(a)?{}:c(e(a))}},function(f,g,a){g=a(19);var c=a(11),e=a(0),b=g?g.isConcatSpreadable:void 0;f.e=function(a){return e(a)||c(a)||!!(b&&a&&a[b])}},function(f,g,a){var c=a(10),e=a(12),b=a(36),d=
a(2);f.e=function(a,f,g){if(!d(g))return!1;var h=typeof f;return("number"==h?e(g)&&b(f,g.length):"string"==h&&f in g)?c(g[f],a):!1}},function(f,g,a){f.e=function(c){var a=typeof c;return"string"==a||"number"==a||"symbol"==a||"boolean"==a?"__proto__"!==c:null===c}},function(f,g,a){var c=a(150),e=function(){var b=/[^.]+$/.exec(c&&c.keys&&c.keys.IE_PROTO||"");return b?"Symbol(src)_1."+b:""}();f.e=function(b){return!!e&&e in b}},function(f,g,a){f.e=function(){this.__data__=[]}},function(f,g,a){var c=
a(20),e=Array.prototype.splice;f.e=function(b){var a=this.__data__;b=c(a,b);if(0>b)return!1;b==a.length-1?a.pop():e.call(a,b,1);return!0}},function(f,g,a){var c=a(20);f.e=function(a){var b=this.__data__;a=c(b,a);return 0>a?void 0:b[a][1]}},function(f,g,a){var c=a(20);f.e=function(a){return-1<c(this.__data__,a)}},function(f,g,a){var c=a(20);f.e=function(a,b){var d=this.__data__,e=c(d,a);0>e?d.push([a,b]):d[e][1]=b;return this}},function(f,g,a){var c=a(111),e=a(17),b=a(28);f.e=function(){this.__data__=
{hash:new c,map:new (b||e),string:new c}}},function(f,g,a){var c=a(21);f.e=function(a){return c(this,a)["delete"](a)}},function(f,g,a){var c=a(21);f.e=function(a){return c(this,a).get(a)}},function(f,g,a){var c=a(21);f.e=function(a){return c(this,a).has(a)}},function(f,g,a){var c=a(21);f.e=function(a,b){c(this,a).set(a,b);return this}},function(f,g,a){f.e=function(a){var c=[];if(null!=a)for(var b in Object(a))c.push(b);return c}},function(f,g,a){f=a(75)(f);a=a(63);var c=(g="object"==typeof g&&g&&
!g.nodeType&&g)&&"object"==typeof f&&f&&!f.nodeType&&f;g=c&&c.exports===g&&a.process;a:{try{var e=g&&g.binding("util");break a}catch(b){}e=void 0}f.e=e},function(f,g,a){f.e=function(a){this.__data__.set(a,"__lodash_hash_undefined__");return this}},function(f,g,a){f.e=function(a){return this.__data__.has(a)}},function(f,g,a){var c=a(17);f.e=function(){this.__data__=new c}},function(f,g,a){f.e=function(a){return this.__data__["delete"](a)}},function(f,g,a){f.e=function(a){return this.__data__.get(a)}},
function(f,g,a){f.e=function(a){return this.__data__.has(a)}},function(f,g,a){var c=a(17),e=a(28),b=a(29);f.e=function(a,f){var d=this.__data__;if(d instanceof c){d=d.__data__;if(!e||199>d.length)return d.push([a,f]),this;d=this.__data__=new b(d)}d.set(a,f);return this}},function(f,g,a){g=a(197);var c=a(204),e=/^\./,b=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,d=/\\(\\)?/g;a=g(function(a){a=c(a);var f=[];e.test(a)&&f.push("");a.replace(b,function(b,
a,c,e){f.push(c?e.replace(d,"$1"):a||b)});return f});f.e=a},function(f,g,a){var c=a(53);f.e=function(a,b,d){a=null==a?void 0:c(a,b);return void 0===a?d:a}},function(f,g,a){var c=a(126),e=a(159);f.e=function(b,a){return null!=b&&e(b,a,c)}},function(f,g,a){f.e=function(a){return a}},function(f,g,a){var c=a(35),e=a(11),b=a(0),d=a(12),h=a(71),k=a(24),l=a(67);g=Object.prototype;var m=g.hasOwnProperty,q=!g.propertyIsEnumerable.call({valueOf:1},"valueOf");f.e=function(a){if(d(a)&&(b(a)||"string"==typeof a||
"function"==typeof a.splice||h(a)||e(a)))return!a.length;var f=c(a);if("[object Map]"==f||"[object Set]"==f)return!a.size;if(q||k(a))return!l(a).length;for(var g in a)if(m.call(a,g))return!1;return!0}},function(f,g,a){var c=a(33),e=a(22),b=a(13);g=Object.prototype;var d=Function.prototype.toString,h=g.hasOwnProperty,k=d.call(Object),l=g.toString;f.e=function(a){if(!b(a)||"[object Object]"!=l.call(a)||e(a))return!1;a=c(a);if(null===a)return!0;a=h.call(a,"constructor")&&a.constructor;return"function"==
typeof a&&a instanceof a&&d.call(a)==k}},function(f,g,a){function c(b,a){if("function"!=typeof b||a&&"function"!=typeof a)throw new TypeError("Expected a function");var d=function(){var c=arguments,e=a?a.apply(this,c):c[0],f=d.cache;if(f.has(e))return f.get(e);c=b.apply(this,c);d.cache=f.set(e,c);return c};d.cache=new (c.Cache||e);return d}var e=a(29);c.Cache=e;f.e=c},function(f,g,a){f.e=function(a){if("function"!=typeof a)throw new TypeError("Expected a function");return function(){var c=arguments;
switch(c.length){case 0:return!a.call(this);case 1:return!a.call(this,c[0]);case 2:return!a.call(this,c[0],c[1]);case 3:return!a.call(this,c[0],c[1],c[2])}return!a.apply(this,c)}}},function(f,g,a){var c=a(56),e=a(198),b=a(200);f.e=function(a,f){return b(a,e(c(f)))}},function(f,g,a){var c=a(56),e=a(58),b=a(155);f.e=function(a,f){return null==a?{}:e(a,b(a),c(f))}},function(f,g,a){var c=a(137),e=a(138),b=a(23),d=a(9);f.e=function(a){return b(a)?c(d(a)):e(a)}},function(f,g,a){f.e=function(){return!1}},
function(f,g,a){var c=a(32),e=a(72);f.e=function(b){return c(b,e(b))}},function(f,g,a){var c=a(140);f.e=function(a){return null==a?"":c(a)}},function(f,g,a){var c={generateIdentifier:function(){return Math.random().toString(36).substr(2,10)}};c.localCName=c.generateIdentifier();c.splitLines=function(a){return a.trim().split("\n").map(function(b){return b.trim()})};c.splitSections=function(a){return a.split("\nm=").map(function(b,a){return(0<a?"m="+b:b).trim()+"\r\n"})};c.matchPrefix=function(a,b){return c.splitLines(a).filter(function(a){return 0===
a.indexOf(b)})};c.parseCandidate=function(a){a=0===a.indexOf("a=candidate:")?a.substring(12).split(" "):a.substring(10).split(" ");for(var b={foundation:a[0],component:a[1],protocol:a[2].toLowerCase(),priority:parseInt(a[3],10),ip:a[4],port:parseInt(a[5],10),type:a[7]},c=8;c<a.length;c+=2)switch(a[c]){case "raddr":b.relatedAddress=a[c+1];break;case "rport":b.relatedPort=parseInt(a[c+1],10);break;case "tcptype":b.tcpType=a[c+1]}return b};c.writeCandidate=function(a){var b=[];b.push(a.foundation);b.push(a.component);
b.push(a.protocol.toUpperCase());b.push(a.priority);b.push(a.ip);b.push(a.port);var c=a.type;b.push("typ");b.push(c);"host"!==c&&a.relatedAddress&&a.relatedPort&&(b.push("raddr"),b.push(a.relatedAddress),b.push("rport"),b.push(a.relatedPort));a.tcpType&&"tcp"===a.protocol.toLowerCase()&&(b.push("tcptype"),b.push(a.tcpType));return"candidate:"+b.join(" ")};c.parseRtpMap=function(a){a=a.substr(9).split(" ");var b={payloadType:parseInt(a.shift(),10)};a=a[0].split("/");b.name=a[0];b.clockRate=parseInt(a[1],
10);b.numChannels=3===a.length?parseInt(a[2],10):1;return b};c.writeRtpMap=function(a){var b=a.payloadType;void 0!==a.preferredPayloadType&&(b=a.preferredPayloadType);return"a=rtpmap:"+b+" "+a.name+"/"+a.clockRate+(1!==a.numChannels?"/"+a.numChannels:"")+"\r\n"};c.parseExtmap=function(a){a=a.substr(9).split(" ");return{id:parseInt(a[0],10),uri:a[1]}};c.writeExtmap=function(a){return"a=extmap:"+(a.id||a.preferredId)+" "+a.uri+"\r\n"};c.parseFmtp=function(a){for(var b={},c=a.substr(a.indexOf(" ")+1).split(";"),
e=0;e<c.length;e++)a=c[e].trim().split("="),b[a[0].trim()]=a[1];return b};c.writeFmtp=function(a){var b="",c=a.payloadType;void 0!==a.preferredPayloadType&&(c=a.preferredPayloadType);if(a.parameters&&Object.keys(a.parameters).length){var e=[];Object.keys(a.parameters).forEach(function(b){e.push(b+"="+a.parameters[b])});b+="a=fmtp:"+c+" "+e.join(";")+"\r\n"}return b};c.parseRtcpFb=function(a){a=a.substr(a.indexOf(" ")+1).split(" ");return{type:a.shift(),parameter:a.join(" ")}};c.writeRtcpFb=function(a){var b=
"",c=a.payloadType;void 0!==a.preferredPayloadType&&(c=a.preferredPayloadType);a.rtcpFeedback&&a.rtcpFeedback.length&&a.rtcpFeedback.forEach(function(a){b+="a=rtcp-fb:"+c+" "+a.type+(a.parameter&&a.parameter.length?" "+a.parameter:"")+"\r\n"});return b};c.parseSsrcMedia=function(a){var b=a.indexOf(" "),c={ssrc:parseInt(a.substr(7,b-7),10)},e=a.indexOf(":",b);-1<e?(c.attribute=a.substr(b+1,e-b-1),c.value=a.substr(e+1)):c.attribute=a.substr(b+1);return c};c.getDtlsParameters=function(a,b){var d=c.splitLines(a);
d=d.concat(c.splitLines(b));d=d.filter(function(a){return 0===a.indexOf("a=fingerprint:")})[0].substr(14);return{role:"auto",fingerprints:[{algorithm:d.split(" ")[0],value:d.split(" ")[1]}]}};c.writeDtlsParameters=function(a,b){var c="a=setup:"+b+"\r\n";a.fingerprints.forEach(function(a){c+="a=fingerprint:"+a.algorithm+" "+a.value+"\r\n"});return c};c.getIceParameters=function(a,b){var d=c.splitLines(a);d=d.concat(c.splitLines(b));return{usernameFragment:d.filter(function(a){return 0===a.indexOf("a=ice-ufrag:")})[0].substr(12),
password:d.filter(function(a){return 0===a.indexOf("a=ice-pwd:")})[0].substr(10)}};c.writeIceParameters=function(a){return"a=ice-ufrag:"+a.usernameFragment+"\r\na=ice-pwd:"+a.password+"\r\n"};c.parseRtpParameters=function(a){for(var b={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},d=c.splitLines(a)[0].split(" "),e=3;e<d.length;e++){var f=d[e],g=c.matchPrefix(a,"a=rtpmap:"+f+" ")[0];if(g){g=c.parseRtpMap(g);var m=c.matchPrefix(a,"a=fmtp:"+f+" ");g.parameters=m.length?c.parseFmtp(m[0]):{};
g.rtcpFeedback=c.matchPrefix(a,"a=rtcp-fb:"+f+" ").map(c.parseRtcpFb);b.codecs.push(g);switch(g.name.toUpperCase()){case "RED":case "ULPFEC":b.fecMechanisms.push(g.name.toUpperCase())}}}c.matchPrefix(a,"a=extmap:").forEach(function(a){b.headerExtensions.push(c.parseExtmap(a))});return b};c.writeRtpDescription=function(a,b){var d="";d+="m="+a+" ";d+=0<b.codecs.length?"9":"0";d+=" UDP/TLS/RTP/SAVPF ";d+=b.codecs.map(function(a){return void 0!==a.preferredPayloadType?a.preferredPayloadType:a.payloadType}).join(" ")+
"\r\n";d+="c=IN IP4 0.0.0.0\r\n";d+="a=rtcp:9 IN IP4 0.0.0.0\r\n";b.codecs.forEach(function(a){d+=c.writeRtpMap(a);d+=c.writeFmtp(a);d+=c.writeRtcpFb(a)});return d+="a=rtcp-mux\r\n"};c.parseRtpEncodingParameters=function(a){var b=[],d=c.parseRtpParameters(a),e=-1!==d.fecMechanisms.indexOf("RED"),f=-1!==d.fecMechanisms.indexOf("ULPFEC"),g=c.matchPrefix(a,"a=ssrc:").map(function(a){return c.parseSsrcMedia(a)}).filter(function(a){return"cname"===a.attribute}),m=0<g.length&&g[0].ssrc,q;g=c.matchPrefix(a,
"a=ssrc-group:FID").map(function(a){a=a.split(" ");a.shift();return a.map(function(a){return parseInt(a,10)})});0<g.length&&1<g[0].length&&g[0][0]===m&&(q=g[0][1]);d.codecs.forEach(function(a){"RTX"===a.name.toUpperCase()&&a.parameters.apt&&(a={ssrc:m,codecPayloadType:parseInt(a.parameters.apt,10),rtx:{payloadType:a.payloadType,ssrc:q}},b.push(a),e&&(a=JSON.parse(JSON.stringify(a)),a.fec={ssrc:q,mechanism:f?"red+ulpfec":"red"},b.push(a)))});0===b.length&&m&&b.push({ssrc:m});var n=c.matchPrefix(a,
"b=");n.length&&(0===n[0].indexOf("b=TIAS:")?n=parseInt(n[0].substr(7),10):0===n[0].indexOf("b=AS:")&&(n=parseInt(n[0].substr(5),10)),b.forEach(function(a){a.maxBitrate=n}));return b};c.writeSessionBoilerplate=function(){return"v=0\r\no=thisisadapterortc 8169639915646943137 2 IN IP4 127.0.0.1\r\ns=-\r\nt=0 0\r\n"};c.writeMediaSection=function(a,b,d,f){b=c.writeRtpDescription(a.kind,b);b+=c.writeIceParameters(a.iceGatherer.getLocalParameters());b+=c.writeDtlsParameters(a.dtlsTransport.getLocalParameters(),
"offer"===d?"actpass":"active");b+="a=mid:"+a.mid+"\r\n";b=a.rtpSender&&a.rtpReceiver?b+"a=sendrecv\r\n":a.rtpSender?b+"a=sendonly\r\n":a.rtpReceiver?b+"a=recvonly\r\n":b+"a=inactive\r\n";a.rtpSender&&(d="msid:"+f.id+" "+a.rtpSender.track.id+"\r\n",b=b+("a="+d)+("a=ssrc:"+a.sendEncodingParameters[0].ssrc+" "+d));return b+="a=ssrc:"+a.sendEncodingParameters[0].ssrc+" cname:"+c.localCName+"\r\n"};c.getDirection=function(a,b){for(var d=c.splitLines(a),e=0;e<d.length;e++)switch(d[e]){case "a=sendrecv":case "a=sendonly":case "a=recvonly":case "a=inactive":return d[e].substr(2)}return b?
c.getDirection(b):"sendrecv"};f.e=c},function(f,g,a){g=a(1).log;var c=a(1).browserDetails;f.e.browserDetails=c;f.e.extractVersion=a(1).extractVersion;f.e.disableLog=a(1).disableLog;var e=a(207)||null,b=a(209)||null,d=a(211)||null;a=a(213)||null;switch(c.browser){case "opera":case "chrome":if(!e||!e.shimPeerConnection){g("Chrome shim is not included in this adapter release.");break}g("adapter.js shimming chrome.");f.e.browserShim=e;e.shimGetUserMedia();e.shimMediaStream();e.shimSourceObject();e.shimPeerConnection();
e.shimOnTrack();break;case "firefox":if(!d||!d.shimPeerConnection){g("Firefox shim is not included in this adapter release.");break}g("adapter.js shimming firefox.");f.e.browserShim=d;d.shimGetUserMedia();d.shimSourceObject();d.shimPeerConnection();d.shimOnTrack();break;case "edge":if(!b||!b.shimPeerConnection){g("MS edge shim is not included in this adapter release.");break}g("adapter.js shimming edge.");f.e.browserShim=b;b.shimGetUserMedia();b.shimPeerConnection();break;case "safari":if(!a){g("Safari shim is not included in this adapter release.");
break}g("adapter.js shimming safari.");f.e.browserShim=a;a.shimGetUserMedia();break;default:g("Unsupported browser!")}},function(f,g,a){var c=a(1).log,e=a(1).browserDetails;f.e={shimMediaStream:function(){window.MediaStream=window.MediaStream||window.webkitMediaStream},shimOnTrack:function(){"object"!==typeof window||!window.RTCPeerConnection||"ontrack"in window.RTCPeerConnection.prototype||Object.defineProperty(window.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(a){var b=
this;this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly));this.addEventListener("track",this._ontrack=a);this.addEventListener("addstream",this._ontrackpoly=function(a){a.stream.addEventListener("addtrack",function(c){var d=new Event("track");d.track=c.track;d.receiver={track:c.track};d.streams=[a.stream];b.dispatchEvent(d)});a.stream.getTracks().forEach(function(b){var c=new Event("track");c.track=b;c.receiver={track:b};c.streams=
[a.stream];this.dispatchEvent(c)}.bind(this))}.bind(this))}})},shimSourceObject:function(){"object"===typeof window&&(!window.HTMLMediaElement||"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(window.HTMLMediaElement.prototype,"srcObject",{get:function(){return this._srcObject},set:function(a){var b=this;this._srcObject=a;this.src&&URL.revokeObjectURL(this.src);a?(this.src=URL.createObjectURL(a),a.addEventListener("addtrack",function(){b.src&&URL.revokeObjectURL(b.src);b.src=
URL.createObjectURL(a)}),a.addEventListener("removetrack",function(){b.src&&URL.revokeObjectURL(b.src);b.src=URL.createObjectURL(a)})):this.src=""}}))},shimPeerConnection:function(){window.RTCPeerConnection=function(a,b){c("PeerConnection");a&&a.iceTransportPolicy&&(a.iceTransports=a.iceTransportPolicy);var d=new webkitRTCPeerConnection(a,b),e=d.getStats.bind(d);d.getStats=function(a,b,c){var d=this,f=arguments;if(0<arguments.length&&"function"===typeof a)return e(a,b);var g=function(a){var b={};
a.result().forEach(function(a){var c={id:a.id,timestamp:a.timestamp,type:a.type};a.names().forEach(function(b){c[b]=a.stat(b)});b[c.id]=c});return b},h=function(a,b){var c=new Map(Object.keys(a).map(function(b){return[b,a[b]]}));b=b||a;Object.keys(b).forEach(function(a){c[a]=b[a]});return c};return 2<=arguments.length?e.apply(this,[function(a){f[1](h(g(a)))},arguments[0]]):(new Promise(function(b,c){1===f.length&&"object"===typeof a?e.apply(d,[function(a){b(h(g(a)))},c]):e.apply(d,[function(a){b(h(g(a),
a.result()))},c])})).then(b,c)};return d};window.RTCPeerConnection.prototype=webkitRTCPeerConnection.prototype;webkitRTCPeerConnection.generateCertificate&&Object.defineProperty(window.RTCPeerConnection,"generateCertificate",{get:function(){return webkitRTCPeerConnection.generateCertificate}});["createOffer","createAnswer"].forEach(function(a){var b=webkitRTCPeerConnection.prototype[a];webkitRTCPeerConnection.prototype[a]=function(){var a=this;if(1>arguments.length||1===arguments.length&&"object"===
typeof arguments[0]){var c=1===arguments.length?arguments[0]:void 0;return new Promise(function(d,e){b.apply(a,[d,e,c])})}return b.apply(this,arguments)}});51>e.version&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(a){var b=webkitRTCPeerConnection.prototype[a];webkitRTCPeerConnection.prototype[a]=function(){var a=arguments,c=this,d=new Promise(function(d,e){b.apply(c,[a[0],d,e])});return 2>a.length?d:d.then(function(){a[1].apply(null,[])},function(b){3<=a.length&&
a[2].apply(null,[b])})}});["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(a){var b=webkitRTCPeerConnection.prototype[a];webkitRTCPeerConnection.prototype[a]=function(){arguments[0]=new ("addIceCandidate"===a?RTCIceCandidate:RTCSessionDescription)(arguments[0]);return b.apply(this,arguments)}});var a=RTCPeerConnection.prototype.addIceCandidate;RTCPeerConnection.prototype.addIceCandidate=function(){return null===arguments[0]?Promise.resolve():a.apply(this,arguments)}},
shimGetUserMedia:a(208)}},function(f,g,a){var c=a(1).log;f.e=function(){var a=function(a){if("object"!==typeof a||a.mandatory||a.optional)return a;var b={};Object.keys(a).forEach(function(c){if("require"!==c&&"advanced"!==c&&"mediaSource"!==c){var d="object"===typeof a[c]?a[c]:{ideal:a[c]};void 0!==d.exact&&"number"===typeof d.exact&&(d.min=d.max=d.exact);var e=function(a,b){return a?a+b.charAt(0).toUpperCase()+b.slice(1):"deviceId"===b?"sourceId":b};if(void 0!==d.ideal){b.optional=b.optional||[];
var f={};"number"===typeof d.ideal?(f[e("min",c)]=d.ideal,b.optional.push(f),f={},f[e("max",c)]=d.ideal):f[e("",c)]=d.ideal;b.optional.push(f)}void 0!==d.exact&&"number"!==typeof d.exact?(b.mandatory=b.mandatory||{},b.mandatory[e("",c)]=d.exact):["min","max"].forEach(function(a){void 0!==d[a]&&(b.mandatory=b.mandatory||{},b.mandatory[e(a,c)]=d[a])})}});a.advanced&&(b.optional=(b.optional||[]).concat(a.advanced));return b},b=function(b,d){(b=JSON.parse(JSON.stringify(b)))&&b.audio&&(b.audio=a(b.audio));
if(b&&"object"===typeof b.video){var e=b.video.facingMode;e=e&&("object"===typeof e?e:{ideal:e});if(!(!e||"user"!==e.exact&&"environment"!==e.exact&&"user"!==e.ideal&&"environment"!==e.ideal||navigator.mediaDevices.getSupportedConstraints&&navigator.mediaDevices.getSupportedConstraints().facingMode)&&(delete b.video.facingMode,"environment"===e.exact||"environment"===e.ideal))return navigator.mediaDevices.enumerateDevices().then(function(f){f=f.filter(function(a){return"videoinput"===a.kind});if(f=
f.find(function(a){return-1!==a.label.toLowerCase().indexOf("back")})||f.length&&f[f.length-1])b.video.deviceId=e.exact?{exact:f.deviceId}:{ideal:f.deviceId};b.video=a(b.video);c("chrome: "+JSON.stringify(b));return d(b)});b.video=a(b.video)}c("chrome: "+JSON.stringify(b));return d(b)},d=function(a){return{name:{PermissionDeniedError:"NotAllowedError",ConstraintNotSatisfiedError:"OverconstrainedError"}[a.name]||a.name,message:a.message,constraint:a.constraintName,toString:function(){return this.name+
(this.message&&": ")+this.message}}};navigator.getUserMedia=function(a,c,e){b(a,function(a){navigator.webkitGetUserMedia(a,c,function(a){e(d(a))})})};var f=function(a){return new Promise(function(b,c){navigator.getUserMedia(a,b,c)})};navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:f,enumerateDevices:function(){return new Promise(function(a){var b={audio:"audioinput",video:"videoinput"};return MediaStreamTrack.getSources(function(c){a(c.map(function(a){return{label:a.label,kind:b[a.kind],
deviceId:a.id,groupId:""}}))})})}});if(navigator.mediaDevices.getUserMedia){var g=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(a){return b(a,function(a){return g(a)["catch"](function(a){return Promise.reject(d(a))})})}}else navigator.mediaDevices.getUserMedia=function(a){return f(a)};"undefined"===typeof navigator.mediaDevices.addEventListener&&(navigator.mediaDevices.addEventListener=function(){c("Dummy mediaDevices.addEventListener called.")});
"undefined"===typeof navigator.mediaDevices.removeEventListener&&(navigator.mediaDevices.removeEventListener=function(){c("Dummy mediaDevices.removeEventListener called.")})}},function(f,g,a){var c=a(205),e=a(1).browserDetails;f.e={shimPeerConnection:function(){window.RTCIceGatherer&&(window.RTCIceCandidate||(window.RTCIceCandidate=function(a){return a}),window.RTCSessionDescription||(window.RTCSessionDescription=function(a){return a}));window.RTCPeerConnection=function(a){var b=this,c=document.createDocumentFragment();
["addEventListener","removeEventListener","dispatchEvent"].forEach(function(a){b[a]=c[a].bind(c)});this.ondatachannel=this.onnegotiationneeded=this.oniceconnectionstatechange=this.onsignalingstatechange=this.onremovestream=this.ontrack=this.onaddstream=this.onicecandidate=null;this.localStreams=[];this.remoteStreams=[];this.getLocalStreams=function(){return b.localStreams};this.getRemoteStreams=function(){return b.remoteStreams};this.localDescription=new RTCSessionDescription({type:"",sdp:""});this.remoteDescription=
new RTCSessionDescription({type:"",sdp:""});this.signalingState="stable";this.iceGatheringState=this.iceConnectionState="new";this.iceOptions={gatherPolicy:"all",iceServers:[]};if(a&&a.iceTransportPolicy)switch(a.iceTransportPolicy){case "all":case "relay":this.iceOptions.gatherPolicy=a.iceTransportPolicy;break;case "none":throw new TypeError('iceTransportPolicy "none" not supported');}this.usingBundle=a&&"max-bundle"===a.bundlePolicy;a&&a.iceServers&&(a=JSON.parse(JSON.stringify(a.iceServers)),this.iceOptions.iceServers=
a.filter(function(a){return a&&a.urls?(a=a.urls,"string"===typeof a&&(a=[a]),a=a.filter(function(a){return 0===a.indexOf("turn:")&&-1!==a.indexOf("transport=udp")&&-1===a.indexOf("turn:[")||0===a.indexOf("stun:")&&14393<=e.version})[0],!!a):!1}));this.transceivers=[];this._localIceCandidatesBuffer=[]};window.RTCPeerConnection.prototype._emitBufferedCandidates=function(){var a=this,d=c.splitSections(a.localDescription.sdp);this._localIceCandidatesBuffer.forEach(function(b){if(b.candidate&&0!==Object.keys(b.candidate).length)-1===
b.candidate.candidate.indexOf("typ endOfCandidates")&&(d[b.candidate.sdpMLineIndex+1]+="a="+b.candidate.candidate+"\r\n");else for(var c=1;c<d.length;c++)-1===d[c].indexOf("\r\na=end-of-candidates\r\n")&&(d[c]+="a=end-of-candidates\r\n");a.localDescription.sdp=d.join("");a.dispatchEvent(b);if(null!==a.onicecandidate)a.onicecandidate(b);!b.candidate&&"complete"!==a.iceGatheringState&&a.transceivers.every(function(a){return a.iceGatherer&&"completed"===a.iceGatherer.state})&&(a.iceGatheringState="complete")});
this._localIceCandidatesBuffer=[]};window.RTCPeerConnection.prototype.addStream=function(a){this.localStreams.push(a.clone());this._maybeFireNegotiationNeeded()};window.RTCPeerConnection.prototype.removeStream=function(a){a=this.localStreams.indexOf(a);-1<a&&(this.localStreams.splice(a,1),this._maybeFireNegotiationNeeded())};window.RTCPeerConnection.prototype.getSenders=function(){return this.transceivers.filter(function(a){return!!a.rtpSender}).map(function(a){return a.rtpSender})};window.RTCPeerConnection.prototype.getReceivers=
function(){return this.transceivers.filter(function(a){return!!a.rtpReceiver}).map(function(a){return a.rtpReceiver})};window.RTCPeerConnection.prototype._getCommonCapabilities=function(a,c){var b={codecs:[],headerExtensions:[],fecMechanisms:[]};a.codecs.forEach(function(a){for(var d=0;d<c.codecs.length;d++){var e=c.codecs[d];if(a.name.toLowerCase()===e.name.toLowerCase()&&a.clockRate===e.clockRate&&a.numChannels===e.numChannels){b.codecs.push(e);e.rtcpFeedback=e.rtcpFeedback.filter(function(b){for(var c=
0;c<a.rtcpFeedback.length;c++)if(a.rtcpFeedback[c].type===b.type&&a.rtcpFeedback[c].parameter===b.parameter)return!0;return!1});break}}});a.headerExtensions.forEach(function(a){for(var d=0;d<c.headerExtensions.length;d++){var e=c.headerExtensions[d];if(a.uri===e.uri){b.headerExtensions.push(e);break}}});return b};window.RTCPeerConnection.prototype._createIceAndDtlsTransports=function(a,d){var b=this,e=new RTCIceGatherer(b.iceOptions),f=new RTCIceTransport(e);e.onlocalcandidate=function(g){var h=new Event("icecandidate");
h.candidate={sdpMid:a,sdpMLineIndex:d};var k=g.candidate;(g=!k||0===Object.keys(k).length)?(void 0===e.state&&(e.state="completed"),h.candidate.candidate="candidate:1 1 udp 1 0.0.0.0 9 typ endOfCandidates"):(k.component="RTCP"===f.component?2:1,h.candidate.candidate=c.writeCandidate(k));k=c.splitSections(b.localDescription.sdp);-1===h.candidate.candidate.indexOf("typ endOfCandidates")?k[h.candidate.sdpMLineIndex+1]+="a="+h.candidate.candidate+"\r\n":k[h.candidate.sdpMLineIndex+1]+="a=end-of-candidates\r\n";
b.localDescription.sdp=k.join("");k=b.transceivers.every(function(a){return a.iceGatherer&&"completed"===a.iceGatherer.state});switch(b.iceGatheringState){case "new":b._localIceCandidatesBuffer.push(h);g&&k&&b._localIceCandidatesBuffer.push(new Event("icecandidate"));break;case "gathering":b._emitBufferedCandidates();b.dispatchEvent(h);if(null!==b.onicecandidate)b.onicecandidate(h);if(k){b.dispatchEvent(new Event("icecandidate"));if(null!==b.onicecandidate)b.onicecandidate(new Event("icecandidate"));
b.iceGatheringState="complete"}}};f.onicestatechange=function(){b._updateConnectionState()};var g=new RTCDtlsTransport(f);g.ondtlsstatechange=function(){b._updateConnectionState()};g.onerror=function(){g.state="failed";b._updateConnectionState()};return{iceGatherer:e,iceTransport:f,dtlsTransport:g}};window.RTCPeerConnection.prototype._transceive=function(a,d,e){var b=this._getCommonCapabilities(a.localCapabilities,a.remoteCapabilities);d&&a.rtpSender&&(b.encodings=a.sendEncodingParameters,b.rtcp=
{cname:c.localCName},a.recvEncodingParameters.length&&(b.rtcp.ssrc=a.recvEncodingParameters[0].ssrc),a.rtpSender.send(b));e&&a.rtpReceiver&&(b.encodings=a.recvEncodingParameters,b.rtcp={cname:a.cname},a.sendEncodingParameters.length&&(b.rtcp.ssrc=a.sendEncodingParameters[0].ssrc),a.rtpReceiver.receive(b))};window.RTCPeerConnection.prototype.setLocalDescription=function(a){var b=this;if("offer"===a.type){if(this._pendingOffer){var e=c.splitSections(a.sdp);var f=e.shift();e.forEach(function(a,d){var e=
c.parseRtpParameters(a);b._pendingOffer[d].localCapabilities=e});this.transceivers=this._pendingOffer;delete this._pendingOffer}}else if("answer"===a.type){e=c.splitSections(b.remoteDescription.sdp);f=e.shift();var g=0<c.matchPrefix(f,"a=ice-lite").length;e.forEach(function(a,d){var e=b.transceivers[d],h=e.iceGatherer,k=e.iceTransport,l=e.dtlsTransport,m=e.localCapabilities,n=e.remoteCapabilities;if("0"!==a.split("\n",1)[0].split(" ",2)[1]){var q=c.getIceParameters(a,f);if(g){var u=c.matchPrefix(a,
"a=candidate:").map(function(a){return c.parseCandidate(a)}).filter(function(a){return"1"===a.component});u.length&&k.setRemoteCandidates(u)}u=c.getDtlsParameters(a,f);g&&(u.role="server");b.usingBundle&&0!==d||(k.start(h,q,g?"controlling":"controlled"),l.start(u));h=b._getCommonCapabilities(m,n);b._transceive(e,0<h.codecs.length,!1)}})}this.localDescription={type:a.type,sdp:a.sdp};switch(a.type){case "offer":this._updateSignalingState("have-local-offer");break;case "answer":this._updateSignalingState("stable");
break;default:throw new TypeError('unsupported type "'+a.type+'"');}var m=1<arguments.length&&"function"===typeof arguments[1];if(m){var q=arguments[1];window.setTimeout(function(){q();"new"===b.iceGatheringState&&(b.iceGatheringState="gathering");b._emitBufferedCandidates()},0)}e=Promise.resolve();e.then(function(){m||("new"===b.iceGatheringState&&(b.iceGatheringState="gathering"),window.setTimeout(b._emitBufferedCandidates.bind(b),500))});return e};window.RTCPeerConnection.prototype.setRemoteDescription=
function(a){var b=this,e=new MediaStream,f=[],g=c.splitSections(a.sdp),m=g.shift(),q=0<c.matchPrefix(m,"a=ice-lite").length;this.usingBundle=0<c.matchPrefix(m,"a=group:BUNDLE ").length;g.forEach(function(d,g){var h=c.splitLines(d)[0].substr(2).split(" "),k=h[0],l="0"===h[1];h=c.getDirection(d,m);var n,u,v,y=c.parseRtpParameters(d);if(!l){var x=c.getIceParameters(d,m);var A=c.getDtlsParameters(d,m);A.role="client"}var E=c.parseRtpEncodingParameters(d);var F=c.matchPrefix(d,"a=mid:");F=F.length?F[0].substr(6):
c.generateIdentifier();if(v=c.matchPrefix(d,"a=ssrc:").map(function(a){return c.parseSsrcMedia(a)}).filter(function(a){return"cname"===a.attribute})[0])var C=v.value;var J=0<c.matchPrefix(d,"a=end-of-candidates",m).length,G=c.matchPrefix(d,"a=candidate:").map(function(a){return c.parseCandidate(a)}).filter(function(a){return"1"===a.component});if("offer"===a.type&&!l){x=b.usingBundle&&0<g?{iceGatherer:b.transceivers[0].iceGatherer,iceTransport:b.transceivers[0].iceTransport,dtlsTransport:b.transceivers[0].dtlsTransport}:
b._createIceAndDtlsTransports(F,g);J&&x.iceTransport.setRemoteCandidates(G);var z=RTCRtpReceiver.getCapabilities(k);v=[{ssrc:1001*(2*g+2)}];l=new RTCRtpReceiver(x.dtlsTransport,k);A=l.track;f.push([A,l]);e.addTrack(A);0<b.localStreams.length&&b.localStreams[0].getTracks().length>=g&&("audio"===k?n=b.localStreams[0].getAudioTracks()[0]:"video"===k&&(n=b.localStreams[0].getVideoTracks()[0]),n&&(u=new RTCRtpSender(n,x.dtlsTransport)));b.transceivers[g]={iceGatherer:x.iceGatherer,iceTransport:x.iceTransport,
dtlsTransport:x.dtlsTransport,localCapabilities:z,remoteCapabilities:y,rtpSender:u,rtpReceiver:l,kind:k,mid:F,cname:C,sendEncodingParameters:v,recvEncodingParameters:E};b._transceive(b.transceivers[g],!1,"sendrecv"===h||"sendonly"===h)}else if("answer"===a.type&&!l){k=b.transceivers[g];n=k.iceGatherer;F=k.iceTransport;var I=k.dtlsTransport;u=k.rtpSender;l=k.rtpReceiver;v=k.sendEncodingParameters;z=k.localCapabilities;b.transceivers[g].recvEncodingParameters=E;b.transceivers[g].remoteCapabilities=
y;b.transceivers[g].cname=C;(q||J)&&G.length&&F.setRemoteCandidates(G);b.usingBundle&&0!==g||(F.start(n,x,"controlling"),I.start(A));b._transceive(k,"sendrecv"===h||"recvonly"===h,"sendrecv"===h||"sendonly"===h);!l||"sendrecv"!==h&&"sendonly"!==h?delete k.rtpReceiver:(A=l.track,f.push([A,l]),e.addTrack(A))}});this.remoteDescription={type:a.type,sdp:a.sdp};switch(a.type){case "offer":this._updateSignalingState("have-remote-offer");break;case "answer":this._updateSignalingState("stable");break;default:throw new TypeError('unsupported type "'+
a.type+'"');}e.getTracks().length&&(b.remoteStreams.push(e),window.setTimeout(function(){var a=new Event("addstream");a.stream=e;b.dispatchEvent(a);null!==b.onaddstream&&window.setTimeout(function(){b.onaddstream(a)},0);f.forEach(function(c){var d=c[0];c=c[1];var f=new Event("track");f.track=d;f.receiver=c;f.streams=[e];b.dispatchEvent(a);null!==b.ontrack&&window.setTimeout(function(){b.ontrack(f)},0)})},0));1<arguments.length&&"function"===typeof arguments[1]&&window.setTimeout(arguments[1],0);return Promise.resolve()};
window.RTCPeerConnection.prototype.close=function(){this.transceivers.forEach(function(a){a.iceTransport&&a.iceTransport.stop();a.dtlsTransport&&a.dtlsTransport.stop();a.rtpSender&&a.rtpSender.stop();a.rtpReceiver&&a.rtpReceiver.stop()});this._updateSignalingState("closed")};window.RTCPeerConnection.prototype._updateSignalingState=function(a){this.signalingState=a;a=new Event("signalingstatechange");this.dispatchEvent(a);if(null!==this.onsignalingstatechange)this.onsignalingstatechange(a)};window.RTCPeerConnection.prototype._maybeFireNegotiationNeeded=
function(){var a=new Event("negotiationneeded");this.dispatchEvent(a);if(null!==this.onnegotiationneeded)this.onnegotiationneeded(a)};window.RTCPeerConnection.prototype._updateConnectionState=function(){var a={"new":0,closed:0,connecting:0,checking:0,connected:0,completed:0,failed:0};this.transceivers.forEach(function(b){a[b.iceTransport.state]++;a[b.dtlsTransport.state]++});a.connected+=a.completed;var c="new";if(0<a.failed)c="failed";else if(0<a.connecting||0<a.checking)c="connecting";else if(0<
a.disconnected)c="disconnected";else if(0<a["new"])c="new";else if(0<a.connected||0<a.completed)c="connected";if(c!==this.iceConnectionState&&(this.iceConnectionState=c,c=new Event("iceconnectionstatechange"),this.dispatchEvent(c),null!==this.oniceconnectionstatechange))this.oniceconnectionstatechange(c)};window.RTCPeerConnection.prototype.createOffer=function(){var a=this;if(this._pendingOffer)throw Error("createOffer called while there is a pending offer.");var d;1===arguments.length&&"function"!==
typeof arguments[0]?d=arguments[0]:3===arguments.length&&(d=arguments[2]);var e=[],f=0,g=0;this.localStreams.length&&(f=this.localStreams[0].getAudioTracks().length,g=this.localStreams[0].getVideoTracks().length);if(d){if(d.mandatory||d.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");void 0!==d.offerToReceiveAudio&&(f=d.offerToReceiveAudio);void 0!==d.offerToReceiveVideo&&(g=d.offerToReceiveVideo)}for(this.localStreams.length&&this.localStreams[0].getTracks().forEach(function(a){e.push({kind:a.kind,
track:a,wantReceive:"audio"===a.kind?0<f:0<g});"audio"===a.kind?f--:"video"===a.kind&&g--});0<f||0<g;)0<f&&(e.push({kind:"audio",wantReceive:!0}),f--),0<g&&(e.push({kind:"video",wantReceive:!0}),g--);var m=c.writeSessionBoilerplate(),q=[];e.forEach(function(b,d){var e=b.track,f=b.kind,g=c.generateIdentifier(),h=a.usingBundle&&0<d?{iceGatherer:q[0].iceGatherer,iceTransport:q[0].iceTransport,dtlsTransport:q[0].dtlsTransport}:a._createIceAndDtlsTransports(g,d),k=RTCRtpSender.getCapabilities(f),l,m,n=
[{ssrc:1001*(2*d+1)}];e&&(l=new RTCRtpSender(e,h.dtlsTransport));b.wantReceive&&(m=new RTCRtpReceiver(h.dtlsTransport,f));q[d]={iceGatherer:h.iceGatherer,iceTransport:h.iceTransport,dtlsTransport:h.dtlsTransport,localCapabilities:k,remoteCapabilities:null,rtpSender:l,rtpReceiver:m,kind:f,mid:g,sendEncodingParameters:n,recvEncodingParameters:null}});this.usingBundle&&(m+="a=group:BUNDLE "+q.map(function(a){return a.mid}).join(" ")+"\r\n");e.forEach(function(b,d){var e=q[d];m+=c.writeMediaSection(e,
e.localCapabilities,"offer",a.localStreams[0])});this._pendingOffer=q;d=new RTCSessionDescription({type:"offer",sdp:m});arguments.length&&"function"===typeof arguments[0]&&window.setTimeout(arguments[0],0,d);return Promise.resolve(d)};window.RTCPeerConnection.prototype.createAnswer=function(){var a=this,d=c.writeSessionBoilerplate();this.usingBundle&&(d+="a=group:BUNDLE "+this.transceivers.map(function(a){return a.mid}).join(" ")+"\r\n");this.transceivers.forEach(function(b){var e=a._getCommonCapabilities(b.localCapabilities,
b.remoteCapabilities);d+=c.writeMediaSection(b,e,"answer",a.localStreams[0])});var e=new RTCSessionDescription({type:"answer",sdp:d});arguments.length&&"function"===typeof arguments[0]&&window.setTimeout(arguments[0],0,e);return Promise.resolve(e)};window.RTCPeerConnection.prototype.addIceCandidate=function(a){if(null===a)this.transceivers.forEach(function(a){a.iceTransport.addRemoteCandidate({})});else{var b=a.sdpMLineIndex;if(a.sdpMid)for(var e=0;e<this.transceivers.length;e++)if(this.transceivers[e].mid===
a.sdpMid){b=e;break}var f=this.transceivers[b];if(f){e=0<Object.keys(a.candidate).length?c.parseCandidate(a.candidate):{};if("tcp"===e.protocol&&(0===e.port||9===e.port)||"1"!==e.component)return;"endOfCandidates"===e.type&&(e={});f.iceTransport.addRemoteCandidate(e);f=c.splitSections(this.remoteDescription.sdp);f[b+1]+=(e.type?a.candidate.trim():"a=end-of-candidates")+"\r\n";this.remoteDescription.sdp=f.join("")}}1<arguments.length&&"function"===typeof arguments[1]&&window.setTimeout(arguments[1],
0);return Promise.resolve()};window.RTCPeerConnection.prototype.getStats=function(){var a=[];this.transceivers.forEach(function(b){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(c){b[c]&&a.push(b[c].getStats())})});var c=1<arguments.length&&"function"===typeof arguments[1]&&arguments[1];return new Promise(function(b){var d=new Map;Promise.all(a).then(function(a){a.forEach(function(a){Object.keys(a).forEach(function(b){d.set(b,a[b]);d[b]=a[b]})});c&&window.setTimeout(c,
0,d);b(d)})})}},shimGetUserMedia:a(210)}},function(f,g,a){f.e=function(){var a=function(a){return{name:{PermissionDeniedError:"NotAllowedError"}[a.name]||a.name,message:a.message,constraint:a.constraint,toString:function(){return this.name}}},e=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(b){return e(b)["catch"](function(b){return Promise.reject(a(b))})}}},function(f,g,a){var c=a(1).browserDetails;f.e={shimOnTrack:function(){"object"!==
typeof window||!window.RTCPeerConnection||"ontrack"in window.RTCPeerConnection.prototype||Object.defineProperty(window.RTCPeerConnection.prototype,"ontrack",{get:function(){return this._ontrack},set:function(a){this._ontrack&&(this.removeEventListener("track",this._ontrack),this.removeEventListener("addstream",this._ontrackpoly));this.addEventListener("track",this._ontrack=a);this.addEventListener("addstream",this._ontrackpoly=function(a){a.stream.getTracks().forEach(function(b){var c=new Event("track");
c.track=b;c.receiver={track:b};c.streams=[a.stream];this.dispatchEvent(c)}.bind(this))}.bind(this))}})},shimSourceObject:function(){"object"===typeof window&&(!window.HTMLMediaElement||"srcObject"in window.HTMLMediaElement.prototype||Object.defineProperty(window.HTMLMediaElement.prototype,"srcObject",{get:function(){return this.mozSrcObject},set:function(a){this.mozSrcObject=a}}))},shimPeerConnection:function(){if("object"===typeof window&&(window.RTCPeerConnection||window.mozRTCPeerConnection)){window.RTCPeerConnection||
(window.RTCPeerConnection=function(a,b){if(38>c.version&&a&&a.iceServers){for(var d=[],e=0;e<a.iceServers.length;e++){var f=a.iceServers[e];if(f.hasOwnProperty("urls"))for(var g=0;g<f.urls.length;g++){var h={url:f.urls[g]};0===f.urls[g].indexOf("turn")&&(h.username=f.username,h.credential=f.credential);d.push(h)}else d.push(a.iceServers[e])}a.iceServers=d}return new mozRTCPeerConnection(a,b)},window.RTCPeerConnection.prototype=mozRTCPeerConnection.prototype,mozRTCPeerConnection.generateCertificate&&
Object.defineProperty(window.RTCPeerConnection,"generateCertificate",{get:function(){return mozRTCPeerConnection.generateCertificate}}),window.RTCSessionDescription=mozRTCSessionDescription,window.RTCIceCandidate=mozRTCIceCandidate);["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(a){var b=RTCPeerConnection.prototype[a];RTCPeerConnection.prototype[a]=function(){arguments[0]=new ("addIceCandidate"===a?RTCIceCandidate:RTCSessionDescription)(arguments[0]);return b.apply(this,
arguments)}});var a=RTCPeerConnection.prototype.addIceCandidate;RTCPeerConnection.prototype.addIceCandidate=function(){return null===arguments[0]?Promise.resolve():a.apply(this,arguments)};var b=function(a){var b=new Map;Object.keys(a).forEach(function(c){b.set(c,a[c]);b[c]=a[c]});return b},d=RTCPeerConnection.prototype.getStats;RTCPeerConnection.prototype.getStats=function(a,c,e){return d.apply(this,[a||null]).then(function(a){return b(a)}).then(c,e)}}},shimGetUserMedia:a(212)}},function(f,g,a){var c=
a(1).log,e=a(1).browserDetails;f.e=function(){var a=function(a){return{name:{SecurityError:"NotAllowedError",PermissionDeniedError:"NotAllowedError"}[a.name]||a.name,message:{"The operation is insecure.":"The request is not allowed by the user agent or the platform in the current context."}[a.message]||a.message,constraint:a.constraint,toString:function(){return this.name+(this.message&&": ")+this.message}}},d=function(b,d,f){var g=function(a){if("object"!==typeof a||a.require)return a;var b=[];Object.keys(a).forEach(function(c){if("require"!==
c&&"advanced"!==c&&"mediaSource"!==c){var d=a[c]="object"===typeof a[c]?a[c]:{ideal:a[c]};void 0===d.min&&void 0===d.max&&void 0===d.exact||b.push(c);void 0!==d.exact&&("number"===typeof d.exact?d.min=d.max=d.exact:a[c]=d.exact,delete d.exact);if(void 0!==d.ideal){a.advanced=a.advanced||[];var e={};e[c]="number"===typeof d.ideal?{min:d.ideal,max:d.ideal}:d.ideal;a.advanced.push(e);delete d.ideal;Object.keys(d).length||delete a[c]}}});b.length&&(a.require=b);return a};b=JSON.parse(JSON.stringify(b));
38>e.version&&(c("spec: "+JSON.stringify(b)),b.audio&&(b.audio=g(b.audio)),b.video&&(b.video=g(b.video)),c("ff37: "+JSON.stringify(b)));return navigator.mozGetUserMedia(b,d,function(b){f(a(b))})},f=function(a){return new Promise(function(b,c){d(a,b,c)})};navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:f,addEventListener:function(){},removeEventListener:function(){}});navigator.mediaDevices.enumerateDevices=navigator.mediaDevices.enumerateDevices||function(){return new Promise(function(a){a([{kind:"audioinput",
deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}])})};if(41>e.version){var g=navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);navigator.mediaDevices.enumerateDevices=function(){return g().then(void 0,function(a){if("NotFoundError"===a.name)return[];throw a;})}}if(49>e.version){var l=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(b){return l(b)["catch"](function(b){return Promise.reject(a(b))})}}navigator.getUserMedia=
function(a,b,c){if(44>e.version)return d(a,b,c);console.warn("navigator.getUserMedia has been replaced by navigator.mediaDevices.getUserMedia");navigator.mediaDevices.getUserMedia(a).then(b,c)}}},function(f,g,a){f.e={shimGetUserMedia:function(){navigator.getUserMedia=navigator.webkitGetUserMedia}}},function(f,g,a){f.e=a(76)}])});